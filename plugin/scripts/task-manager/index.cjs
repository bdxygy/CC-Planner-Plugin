#!/usr/bin/env node
(()=>{var e={468(e,t,r){var i,n,s={};e.exports=s,s.themes={};var a=r(23),o=s.styles=r(714),u=Object.defineProperties,l=new RegExp(/[\r\n]+/g);s.supportsColor=r(654).supportsColor,void 0===s.enabled&&(s.enabled=!1!==s.supportsColor()),s.enable=function(){s.enabled=!0},s.disable=function(){s.enabled=!1},s.stripColors=s.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")},s.stylize=function(e,t){if(!s.enabled)return e+"";var r=o[t];return!r&&t in s?s[t](e):r.open+e+r.close};var d=/[|\\{}()[\]^$+*?.]/g,c=function(e){if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(d,"\\$&")};function h(e){var t=function e(){return D.apply(e,arguments)};return t._styles=e,t.__proto__=m,t}var p=(i={},o.grey=o.gray,Object.keys(o).forEach(function(e){o[e].closeRe=RegExp(c(o[e].close),"g"),i[e]={get:function(){return h(this._styles.concat(e))}}}),i),m=u(function(){},p);function D(){var e=Array.prototype.slice.call(arguments),t=e.map(function(e){return null!=e&&e.constructor===String?e:a.inspect(e)}).join(" ");if(!s.enabled||!t)return t;for(var r=-1!=t.indexOf("\n"),i=this._styles,n=i.length;n--;){var u=o[i[n]];t=u.open+t.replace(u.closeRe,u.open)+u.close,r&&(t=t.replace(l,function(e){return u.close+e+u.open}))}return t}s.setTheme=function(e){if("string"==typeof e)return void console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");for(var t in e)!function(t){s[t]=function(r){if("object"==typeof e[t]){var i=r;for(var n in e[t])i=s[e[t][n]](i);return i}return s[e[t]](r)}}(t)};var f=function(e,t){var r=t.split("");return(r=r.map(e)).join("")};for(var g in s.trap=r(185),s.zalgo=r(781),s.maps={},s.maps.america=r(892)(s),s.maps.zebra=r(632)(s),s.maps.rainbow=r(374)(s),s.maps.random=r(713)(s),s.maps)!function(e){s[e]=function(t){return f(s.maps[e],t)}}(g);u(s,(n={},Object.keys(p).forEach(function(e){n[e]={get:function(){return h([e])}}}),n))},185(e){e.exports=function(e,t){var r="";e=(e=e||"Run the trap, drop the bass").split("");var i={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["\xdf","Ɓ","Ƀ","ɮ","β","฿"],c:["\xa9","Ȼ","Ͼ"],d:["\xd0","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["\xcb","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["\xd1","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["\xd8","\xf5","\xf8","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["\xae","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["\xa7","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["\xa5","Ұ","Ӌ"],z:["Ƶ","ɀ"]};return e.forEach(function(e){var t=Math.floor(Math.random()*(i[e=e.toLowerCase()]||[" "]).length);void 0!==i[e]?r+=i[e][t]:r+=e}),r}},781(e){e.exports=function(e,t){e=e||"   he is here   ";var r={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},i=[].concat(r.up,r.down,r.mid);function n(e){return Math.floor(Math.random()*e)}return function(e,t){var s,a,o="";for(a in(t=t||{}).up=void 0===t.up||t.up,t.mid=void 0===t.mid||t.mid,t.down=void 0===t.down||t.down,t.size=void 0!==t.size?t.size:"maxi",e=e.split(""))if(!function(e){var t=!1;return i.filter(function(r){t=r===e}),t}(a)){switch(o+=e[a],s={up:0,down:0,mid:0},t.size){case"mini":s.up=n(8),s.mid=n(2),s.down=n(8);break;case"maxi":s.up=n(16)+3,s.mid=n(4)+1,s.down=n(64)+3;break;default:s.up=n(8)+1,s.mid=n(6)/2,s.down=n(8)+1}var u=["up","mid","down"];for(var l in u)for(var d=u[l],c=0;c<=s[d];c++)t[d]&&(o+=r[d][n(r[d].length)])}return o}(e,t)}},892(e){e.exports=function(e){return function(t,r,i){if(" "===t)return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}},374(e){e.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,i,n){return" "===r?r:e[t[i++%t.length]](r)}}},713(e){e.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,i,n){return" "===r?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}},632(e){e.exports=function(e){return function(t,r,i){return r%2==0?t:e.inverse(t)}}},714(e){var t={};e.exports=t;var r={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(r).forEach(function(e){var i=r[e],n=t[e]=[];n.open="\x1b["+i[0]+"m",n.close="\x1b["+i[1]+"m"})},1(e){"use strict";e.exports=function(e,t){var r=(t=t||process.argv).indexOf("--"),i=/^-{1,2}/.test(e)?"":"--",n=t.indexOf(i+e);return -1!==n&&(-1===r||n<r)}},654(e,t,r){"use strict";var i=r(857),n=r(1),s=process.env,a=void 0;function o(e){var t;return 0!==(t=function(e){if(!1===a)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(e&&!e.isTTY&&!0!==a)return 0;var t=+!!a;if("win32"===process.platform){var r=i.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(e){return e in s})||"codeship"===s.CI_NAME?1:t;if("TEAMCITY_VERSION"in s)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION);if("TERM_PROGRAM"in s){var o=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:(s.TERM,t)}(e))&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}n("no-color")||n("no-colors")||n("color=false")?a=!1:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(a=!0),"FORCE_COLOR"in s&&(a=0===s.FORCE_COLOR.length||0!==parseInt(s.FORCE_COLOR,10)),e.exports={supportsColor:o,stdout:o(process.stdout),stderr:o(process.stderr)}},921(e,t,r){e.exports=r(468)},954(e){"use strict";e.exports=({onlyFirst:e=!1}={})=>RegExp("[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)|(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))",e?void 0:"g")},439(e,t,r){e.exports=r(362)},912(e,t,r){let{info:i,debug:n}=r(553),s=r(679);class a{constructor(e){this.setOptions(e),this.x=null,this.y=null}setOptions(e){-1!==["boolean","number","bigint","string"].indexOf(typeof e)&&(e={content:""+e}),e=e||{},this.options=e;let t=e.content;if(-1!==["boolean","number","bigint","string"].indexOf(typeof t))this.content=String(t);else if(t)throw Error("Content needs to be a primitive, got: "+typeof t);else this.content=this.options.href||"";this.colSpan=e.colSpan||1,this.rowSpan=e.rowSpan||1,this.options.href&&Object.defineProperty(this,"href",{get(){return this.options.href}})}mergeTableOptions(e,t){this.cells=t;let r=this.options.chars||{},i=e.chars,n=this.chars={};h.forEach(function(e){d(r,i,e,n)}),this.truncate=this.options.truncate||e.truncate;let a=this.options.style=this.options.style||{},o=e.style;d(a,o,"padding-left",this),d(a,o,"padding-right",this),this.head=a.head||o.head,this.border=a.border||o.border,this.fixedWidth=e.colWidths[this.x],this.lines=this.computeLines(e),this.desiredWidth=s.strlen(this.content)+this.paddingLeft+this.paddingRight,this.desiredHeight=this.lines.length}computeLines(e){let t=e.wordWrap||e.textWrap,{wordWrap:r=t}=this.options;if(this.fixedWidth&&r){if(this.fixedWidth-=this.paddingLeft+this.paddingRight,this.colSpan){let t=1;for(;t<this.colSpan;)this.fixedWidth+=e.colWidths[this.x+t],t++}let{wrapOnWordBoundary:t=!0}=e,{wrapOnWordBoundary:r=t}=this.options;return this.wrapLines(s.wordWrap(this.fixedWidth,this.content,r))}return this.wrapLines(this.content.split("\n"))}wrapLines(e){let t=s.colorizeLines(e);return this.href?t.map(e=>s.hyperlink(this.href,e)):t}init(e){let t=this.x,r=this.y;this.widths=e.colWidths.slice(t,t+this.colSpan),this.heights=e.rowHeights.slice(r,r+this.rowSpan),this.width=this.widths.reduce(c,-1),this.height=this.heights.reduce(c,-1),this.hAlign=this.options.hAlign||e.colAligns[t],this.vAlign=this.options.vAlign||e.rowAligns[r],this.drawRight=t+this.colSpan==e.colWidths.length}draw(e,t){let r;if("top"==e)return this.drawTop(this.drawRight);if("bottom"==e)return this.drawBottom(this.drawRight);let n=s.truncate(this.content,10,this.truncate);e||i(`${this.y}-${this.x}: ${this.rowSpan-e}x${this.colSpan} Cell ${n}`);let a=Math.max(this.height-this.lines.length,0);switch(this.vAlign){case"center":r=Math.ceil(a/2);break;case"bottom":r=a;break;default:r=0}if(e<r||e>=r+this.lines.length)return this.drawEmpty(this.drawRight,t);let o=this.lines.length>this.height&&e+1>=this.height;return this.drawLine(e-r,this.drawRight,o,t)}drawTop(e){let t=[];return this.cells?this.widths.forEach(function(e,r){t.push(this._topLeftChar(r)),t.push(s.repeat(this.chars[0==this.y?"top":"mid"],e))},this):(t.push(this._topLeftChar(0)),t.push(s.repeat(this.chars[0==this.y?"top":"mid"],this.width))),e&&t.push(this.chars[0==this.y?"topRight":"rightMid"]),this.wrapWithStyleColors("border",t.join(""))}_topLeftChar(e){let t,r=this.x+e;if(0==this.y)t=0==r?"topLeft":0==e?"topMid":"top";else if(0==r)t="leftMid";else if(t=0==e?"midMid":"bottomMid",this.cells&&(this.cells[this.y-1][r]instanceof a.ColSpanCell&&(t=0==e?"topMid":"mid"),0==e)){let e=1;for(;this.cells[this.y][r-e]instanceof a.ColSpanCell;)e++;this.cells[this.y][r-e]instanceof a.RowSpanCell&&(t="leftMid")}return this.chars[t]}wrapWithStyleColors(e,t){if(!this[e]||!this[e].length)return t;try{let i=r(921);for(let t=this[e].length-1;t>=0;t--)i=i[this[e][t]];return i(t)}catch(e){return t}}drawLine(e,t,r,i){let n=this.chars[0==this.x?"left":"middle"];if(this.x&&i&&this.cells){let e=this.cells[this.y+i][this.x-1];for(;e instanceof o;)e=this.cells[e.y][e.x-1];e instanceof u||(n=this.chars.rightMid)}let a=s.repeat(" ",this.paddingLeft),l=t?this.chars.right:"",d=s.repeat(" ",this.paddingRight),c=this.lines[e],h=this.width-(this.paddingLeft+this.paddingRight);r&&(c+=this.truncate||"…");let p=s.truncate(c,h,this.truncate);return p=a+(p=s.pad(p,h," ",this.hAlign))+d,this.stylizeLine(n,p,l)}stylizeLine(e,t,r){return e=this.wrapWithStyleColors("border",e),r=this.wrapWithStyleColors("border",r),0===this.y&&(t=this.wrapWithStyleColors("head",t)),e+t+r}drawBottom(e){let t=this.chars[0==this.x?"bottomLeft":"bottomMid"],r=s.repeat(this.chars.bottom,this.width),i=e?this.chars.bottomRight:"";return this.wrapWithStyleColors("border",t+r+i)}drawEmpty(e,t){let r=this.chars[0==this.x?"left":"middle"];if(this.x&&t&&this.cells){let e=this.cells[this.y+t][this.x-1];for(;e instanceof o;)e=this.cells[e.y][e.x-1];e instanceof u||(r=this.chars.rightMid)}let i=e?this.chars.right:"",n=s.repeat(" ",this.width);return this.stylizeLine(r,n,i)}}class o{draw(e){return"number"==typeof e&&n(`${this.y}-${this.x}: 1x1 ColSpanCell`),""}init(){}mergeTableOptions(){}}class u{constructor(e){this.originalCell=e}init(e){let t=this.y,r=this.originalCell.y;this.cellOffset=t-r,this.offset=function(e,t,r){let i=e[t];for(let n=1;n<r;n++)i+=1+e[t+n];return i}(e.rowHeights,r,this.cellOffset)}draw(e){return"top"==e?this.originalCell.draw(this.offset,this.cellOffset):"bottom"==e?this.originalCell.draw("bottom"):(n(`${this.y}-${this.x}: 1x${this.colSpan} RowSpanCell for ${this.originalCell.content}`),this.originalCell.draw(this.offset+1+e))}mergeTableOptions(){}}function l(...e){return e.filter(e=>null!=e).shift()}function d(e,t,r,i){let n=r.split("-");n.length>1?(n[1]=n[1].charAt(0).toUpperCase()+n[1].substr(1),i[n=n.join("")]=l(e[n],e[r],t[n],t[r])):i[r]=l(e[r],t[r])}function c(e,t){return e+t+1}let h=["top","top-mid","top-left","top-right","bottom","bottom-mid","bottom-left","bottom-right","left","left-mid","mid","mid-mid","right","right-mid","middle"];e.exports=a,e.exports.ColSpanCell=o,e.exports.RowSpanCell=u},553(e){let t=[],r=0,i=(e,i)=>{r>=i&&t.push(e)};i.WARN=1,i.INFO=2,i.DEBUG=3,i.reset=()=>{t=[]},i.setDebugLevel=e=>{r=e},i.warn=e=>i(e,i.WARN),i.info=e=>i(e,i.INFO),i.debug=e=>i(e,i.DEBUG),i.debugMessages=()=>t,e.exports=i},260(e,t,r){let{warn:i,debug:n}=r(553),s=r(912),{ColSpanCell:a,RowSpanCell:o}=s;function u(e,t,r,i){return function(n,s){let a=[],o=[],u={};s.forEach(function(n){n.forEach(function(n){(n[e]||1)>1?o.push(n):a[n[r]]=Math.max(a[n[r]]||0,n[t]||0,i)})}),n.forEach(function(e,t){"number"==typeof e&&(a[t]=e)});for(let i=o.length-1;i>=0;i--){let s=o[i],l=s[e],d=s[r],c=a[d],h=+("number"!=typeof n[d]);if("number"==typeof c)for(let e=1;e<l;e++)c+=1+a[d+e],"number"!=typeof n[d+e]&&h++;else c="desiredWidth"===t?s.desiredWidth-1:1,(!u[d]||u[d]<c)&&(u[d]=c);if(s[t]>c){let e=0;for(;h>0&&s[t]>c;){if("number"!=typeof n[d+e]){let r=Math.round((s[t]-c)/h);c+=r,a[d+e]+=r,h--}e++}}}Object.assign(n,a,u);for(let e=0;e<n.length;e++)n[e]=Math.max(i,n[e]||0)}}!function(){function t(e){let t={};e.forEach(function(e,r){let i=0;e.forEach(function(e){e.y=r,e.x=r?function e(t,r){return t[r]>0?e(t,r+1):r}(t,i):i;let n=e.rowSpan||1,s=e.colSpan||1;if(n>1)for(let r=0;r<s;r++)t[e.x+r]=n;i=e.x+s}),Object.keys(t).forEach(e=>{t[e]--,t[e]<1&&delete t[e]})})}function r(e){let t=0;return e.forEach(function(e){e.forEach(function(e){t=Math.max(t,e.x+(e.colSpan||1))})}),t}function l(e,t,r){let i=Math.min(e.length-1,r),n={x:t,y:r};for(let t=0;t<=i;t++){let r=e[t];for(let e=0;e<r.length;e++)if(function(e,t){let r=e.y,i=e.y-1+(e.rowSpan||1),n=t.y,s=t.y-1+(t.rowSpan||1),a=e.x,o=e.x-1+(e.colSpan||1),u=t.x,l=t.x-1+(t.colSpan||1);return!(r>s||n>i)&&!(a>l||u>o)}(n,r[e]))return!0}return!1}function d(e){e.forEach(function(t,r){t.forEach(function(t){for(let i=1;i<t.rowSpan;i++){let n=new o(t);n.x=t.x,n.y=t.y+i,n.colSpan=t.colSpan,c(n,e[r+i])}})})}function c(e,t){let r=0;for(;r<t.length&&t[r].x<e.x;)r++;t.splice(r,0,e)}function h(e){let t=e.length,a=r(e);n(`Max rows: ${t}; Max cols: ${a}`);for(let r=0;r<t;r++)for(let n=0;n<a;n++)if(!l(e,n,r)){let o={x:n,y:r,colSpan:1,rowSpan:1};for(n++;n<a&&!l(e,n,r);)o.colSpan++,n++;let u=r+1;for(;u<t&&function(e,t,r,i){for(let n=r;n<i;n++)if(l(e,n,t))return!1;return!0}(e,u,o.x,o.x+o.colSpan);)o.rowSpan++,u++;let d=new s(o);d.x=o.x,d.y=o.y,i(`Missing cell at ${d.y}-${d.x}.`),c(d,e[r])}}e.exports={makeTableLayout:function(e){let r=e.map(function(e){if(!Array.isArray(e)){let t=Object.keys(e)[0];Array.isArray(e=e[t])?(e=e.slice()).unshift(t):e=[t,e]}return e.map(function(e){return new s(e)})});return t(r),h(r),d(r),!function(e){for(let t=e.length-1;t>=0;t--){let r=e[t];for(let e=0;e<r.length;e++){let t=r[e];for(let i=1;i<t.colSpan;i++){let n=new a;n.x=t.x+i,n.y=t.y,r.splice(e+1,0,n)}}}}(r),r},layoutTable:t,addRowSpanCells:d,maxWidth:r,fillInTable:h,computeWidths:u("colSpan","desiredWidth","x",1),computeHeights:u("rowSpan","desiredHeight","y",1)}}()},362(e,t,r){let i=r(553),n=r(679),s=r(260);class a extends Array{constructor(e){super();const t=n.mergeOptions(e);if(Object.defineProperty(this,"options",{value:t,enumerable:t.debug}),t.debug){switch(typeof t.debug){case"boolean":i.setDebugLevel(i.WARN);break;case"number":i.setDebugLevel(t.debug);break;case"string":i.setDebugLevel(parseInt(t.debug,10));break;default:i.setDebugLevel(i.WARN),i.warn(`Debug option is expected to be boolean, number, or string. Received a ${typeof t.debug}`)}Object.defineProperty(this,"messages",{get:()=>i.debugMessages()})}}toString(){let e=this,t=this.options.head&&this.options.head.length;t?(e=[this.options.head],this.length&&e.push.apply(e,this)):this.options.style.head=[];let r=s.makeTableLayout(e);r.forEach(function(e){e.forEach(function(e){e.mergeTableOptions(this.options,r)},this)},this),s.computeWidths(this.options.colWidths,r),s.computeHeights(this.options.rowHeights,r),r.forEach(function(e){e.forEach(function(e){e.init(this.options)},this)},this);let i=[];for(let e=0;e<r.length;e++){let n=r[e],s=this.options.rowHeights[e];(0===e||!this.options.style.compact||1==e&&t)&&o(n,"top",i);for(let e=0;e<s;e++)o(n,e,i);e+1==r.length&&o(n,"bottom",i)}return i.join("\n")}get width(){return this.toString().split("\n")[0].length}}function o(e,t,r){let i=[];e.forEach(function(e){i.push(e.draw(t))});let n=i.join("");n.length&&r.push(n)}a.reset=()=>i.reset(),e.exports=a},679(e,t,r){let i=r(273);function n(e){return e?/\u001b\[((?:\d*;){0,5}\d*)m/g:/\u001b\[(?:\d*;){0,5}\d*m/g}function s(e){let t=n();return(""+e).replace(t,"").split("\n").reduce(function(e,t){return i(t)>e?i(t):e},0)}function a(e,t){return Array(t+1).join(e)}let o={};function u(e,t,r){r="\x1b["+r+"m",o[t="\x1b["+t+"m"]={set:e,to:!0},o[r]={set:e,to:!1},o[e]={on:t,off:r}}function l(e,t){let r=t[1]?parseInt(t[1].split(";")[0]):0;if(r>=30&&r<=39||r>=90&&r<=97){e.lastForegroundAdded=t[0];return}if(r>=40&&r<=49||r>=100&&r<=107){e.lastBackgroundAdded=t[0];return}if(0===r){for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&delete e[t];return}let i=o[t[0]];i&&(e[i.set]=i.to)}function d(e,t){let r=e.lastBackgroundAdded,i=e.lastForegroundAdded;return delete e.lastBackgroundAdded,delete e.lastForegroundAdded,Object.keys(e).forEach(function(r){e[r]&&(t+=o[r].off)}),r&&"\x1b[49m"!=r&&(t+="\x1b[49m"),i&&"\x1b[39m"!=i&&(t+="\x1b[39m"),t}function c(e,t){let r,i=[],n=t.split(/(\s+)/g),a=[],o=0;for(let t=0;t<n.length;t+=2){let u=n[t],l=o+s(u);o>0&&r&&(l+=r.length),l>e?(0!==o&&i.push(a.join("")),a=[u],o=s(u)):(a.push(r||"",u),o=l),r=n[t+1]}return o&&i.push(a.join("")),i}function h(e,t){let r=[],i="",n=t.split(/(\s+)/g);for(let t=0;t<n.length;t+=2){var s=n[t],a=t&&n[t-1];for(i.length&&a&&(i+=a),i+=s;i.length>e;)r.push(i.slice(0,e)),i=i.slice(e)}return i.length&&r.push(i),r}u("bold",1,22),u("italics",3,23),u("underline",4,24),u("inverse",7,27),u("strikethrough",9,29),e.exports={strlen:s,repeat:a,pad:function(e,t,r,i){let n=s(e);if(t+1>=n){let s=t-n;switch(i){case"right":e=a(r,s)+e;break;case"center":{let t=Math.ceil(s/2);e=a(r,s-t)+e+a(r,t);break}default:e+=a(r,s)}}return e},truncate:function(e,t,r){if(r=r||"…",s(e)<=t)return e;let i=function(e,t){let r,i=n(!0),a=e.split(n()),o=0,u=0,c="",h={};for(;u<t;){r=i.exec(e);let n=a[o];if(o++,u+s(n)>t&&(n=function(e,t){if(e.length===s(e))return e.substr(0,t);for(;s(e)>t;)e=e.slice(0,-1);return e}(n,t-u)),c+=n,(u+=s(n))<t){if(!r)break;c+=r[0],l(h,r)}}return d(h,c)}(e,t-=s(r));i+=r;let a="\x1b]8;;\x07";return e.includes(a)&&!i.includes(a)&&(i+=a),i},mergeOptions:function(e,t){let r=Object.assign({},t=t||{chars:{top:"─","top-mid":"┬","top-left":"┌","top-right":"┐",bottom:"─","bottom-mid":"┴","bottom-left":"└","bottom-right":"┘",left:"│","left-mid":"├",mid:"─","mid-mid":"┼",right:"│","right-mid":"┤",middle:"│"},truncate:"…",colWidths:[],rowHeights:[],colAligns:[],rowAligns:[],style:{"padding-left":1,"padding-right":1,head:["red"],border:["grey"],compact:!1},head:[]},e=e||{});return r.chars=Object.assign({},t.chars,e.chars),r.style=Object.assign({},t.style,e.style),r},wordWrap:function(e,t,r=!0){let i=[];t=t.split("\n");let n=r?c:h;for(let r=0;r<t.length;r++)i.push.apply(i,n(e,t[r]));return i},colorizeLines:function(e){let t={},r=[];for(let i=0;i<e.length;i++){let s=function(e,t){let r=e.lastBackgroundAdded,i=e.lastForegroundAdded;return delete e.lastBackgroundAdded,delete e.lastForegroundAdded,Object.keys(e).forEach(function(r){e[r]&&(t=o[r].on+t)}),r&&"\x1b[49m"!=r&&(t=r+t),i&&"\x1b[39m"!=i&&(t=i+t),t}(t,e[i]),a=Object.assign({},t=function(e){let t=n(!0),r=t.exec(e),i={};for(;null!==r;)l(i,r),r=t.exec(e);return i}(s));r.push(d(a,s))}return r},hyperlink:function(e,t){return"\x1b]8;;"+(e||t)+"\x07"+t+"\x1b]8;;\x07"}}},102(e){"use strict";e.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},807(e){"use strict";let t=e=>!Number.isNaN(e)&&(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&12351!==e||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141)||!1);e.exports=t,e.exports.default=t},273(e,t,r){"use strict";let i=r(663),n=r(807),s=r(102),a=e=>{if("string"!=typeof e||0===e.length||0===(e=i(e)).length)return 0;e=e.replace(s(),"  ");let t=0;for(let r=0;r<e.length;r++){let i=e.codePointAt(r);i<=31||i>=127&&i<=159||i>=768&&i<=879||(i>65535&&r++,t+=n(i)?2:1)}return t};e.exports=a,e.exports.default=a},663(e,t,r){"use strict";let i=r(954);e.exports=e=>"string"==typeof e?e.replace(i(),""):e},421(e){"use strict";e.exports=require("node:child_process")},474(e){"use strict";e.exports=require("node:events")},24(e){"use strict";e.exports=require("node:fs")},760(e){"use strict";e.exports=require("node:path")},708(e){"use strict";e.exports=require("node:process")},857(e){"use strict";e.exports=require("os")},23(e){"use strict";e.exports=require("util")},523(e,t,r){let{Argument:i}=r(268),{Command:n}=r(546),{CommanderError:s,InvalidArgumentError:a}=r(761),{Help:o}=r(704),{Option:u}=r(562);t.program=new n,t.createCommand=e=>new n(e),t.createOption=(e,t)=>new u(e,t),t.createArgument=(e,t)=>new i(e,t),t.Command=n,t.Option=u,t.Argument=i,t.Help=o,t.CommanderError=s,t.InvalidArgumentError=a,t.InvalidOptionArgumentError=a},268(e,t,r){let{InvalidArgumentError:i}=r(761);t.Argument=class{constructor(e,t){switch(this.description=t||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e}this._name.length>3&&"..."===this._name.slice(-3)&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(e,t){return t!==this.defaultValue&&Array.isArray(t)?t.concat(e):[e]}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}argParser(e){return this.parseArg=e,this}choices(e){return this.argChoices=e.slice(),this.parseArg=(e,t)=>{if(!this.argChoices.includes(e))throw new i(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(e,t):e},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}},t.humanReadableArgName=function(e){let t=e.name()+(!0===e.variadic?"...":"");return e.required?"<"+t+">":"["+t+"]"}},546(e,t,r){let i=r(474).EventEmitter,n=r(421),s=r(760),a=r(24),o=r(708),{Argument:u,humanReadableArgName:l}=r(268),{CommanderError:d}=r(761),{Help:c}=r(704),{Option:h,DualOptions:p}=r(562),{suggestSimilar:m}=r(12);class D extends i{constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:e=>o.stdout.write(e),writeErr:e=>o.stderr.write(e),getOutHelpWidth:()=>o.stdout.isTTY?o.stdout.columns:void 0,getErrHelpWidth:()=>o.stderr.isTTY?o.stderr.columns:void 0,outputError:(e,t)=>t(e)},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={}}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._helpOption=e._helpOption,this._helpCommand=e._helpCommand,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}_getCommandAndAncestors(){let e=[];for(let t=this;t;t=t.parent)e.push(t);return e}command(e,t,r){let i=t,n=r;"object"==typeof i&&null!==i&&(n=i,i=null),n=n||{};let[,s,a]=e.match(/([^ ]+) *(.*)/),o=this.createCommand(s);return(i&&(o.description(i),o._executableHandler=!0),n.isDefault&&(this._defaultCommandName=o._name),o._hidden=!!(n.noHelp||n.hidden),o._executableFile=n.executableFile||null,a&&o.arguments(a),this._registerCommand(o),o.parent=this,o.copyInheritedSettings(this),i)?this:o}createCommand(e){return new D(e)}createHelp(){return Object.assign(new c,this.configureHelp())}configureHelp(e){return void 0===e?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return void 0===e?this._outputConfiguration:(Object.assign(this._outputConfiguration,e),this)}showHelpAfterError(e=!0){return"string"!=typeof e&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,t){if(!e._name)throw Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return(t=t||{}).isDefault&&(this._defaultCommandName=e._name),(t.noHelp||t.hidden)&&(e._hidden=!0),this._registerCommand(e),e.parent=this,e._checkForBrokenPassThrough(),this}createArgument(e,t){return new u(e,t)}argument(e,t,r,i){let n=this.createArgument(e,t);return"function"==typeof r?n.default(i).argParser(r):n.default(r),this.addArgument(n),this}arguments(e){return e.trim().split(/ +/).forEach(e=>{this.argument(e)}),this}addArgument(e){let t=this.registeredArguments.slice(-1)[0];if(t&&t.variadic)throw Error(`only the last argument can be variadic '${t.name()}'`);if(e.required&&void 0!==e.defaultValue&&void 0===e.parseArg)throw Error(`a default value for a required argument is never used: '${e.name()}'`);return this.registeredArguments.push(e),this}helpCommand(e,t){if("boolean"==typeof e)return this._addImplicitHelpCommand=e,this;let[,r,i]=(e=e??"help [command]").match(/([^ ]+) *(.*)/),n=t??"display help for command",s=this.createCommand(r);return s.helpOption(!1),i&&s.arguments(i),n&&s.description(n),this._addImplicitHelpCommand=!0,this._helpCommand=s,this}addHelpCommand(e,t){return"object"!=typeof e?this.helpCommand(e,t):(this._addImplicitHelpCommand=!0,this._helpCommand=e),this}_getHelpCommand(){return this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))?(void 0===this._helpCommand&&this.helpCommand(void 0,void 0),this._helpCommand):null}hook(e,t){let r=["preSubcommand","preAction","postAction"];if(!r.includes(e))throw Error(`Unexpected value for event passed to hook : '${e}'.
Expecting one of '${r.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(t):this._lifeCycleHooks[e]=[t],this}exitOverride(e){return e?this._exitCallback=e:this._exitCallback=e=>{if("commander.executeSubCommandAsync"!==e.code)throw e},this}_exit(e,t,r){this._exitCallback&&this._exitCallback(new d(e,t,r)),o.exit(e)}action(e){let t=t=>{let r=this.registeredArguments.length,i=t.slice(0,r);return this._storeOptionsAsProperties?i[r]=this:i[r]=this.opts(),i.push(this),e.apply(this,i)};return this._actionHandler=t,this}createOption(e,t){return new h(e,t)}_callParseArg(e,t,r,i){try{return e.parseArg(t,r)}catch(e){if("commander.invalidArgument"===e.code){let t=`${i} ${e.message}`;this.error(t,{exitCode:e.exitCode,code:e.code})}throw e}}_registerOption(e){let t=e.short&&this._findOption(e.short)||e.long&&this._findOption(e.long);if(t){let r=e.long&&this._findOption(e.long)?e.long:e.short;throw Error(`Cannot add option '${e.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${r}'
-  already used by option '${t.flags}'`)}this.options.push(e)}_registerCommand(e){let t=e=>[e.name()].concat(e.aliases()),r=t(e).find(e=>this._findCommand(e));if(r){let i=t(this._findCommand(r)).join("|"),n=t(e).join("|");throw Error(`cannot add command '${n}' as already have command '${i}'`)}this.commands.push(e)}addOption(e){this._registerOption(e);let t=e.name(),r=e.attributeName();if(e.negate){let t=e.long.replace(/^--no-/,"--");this._findOption(t)||this.setOptionValueWithSource(r,void 0===e.defaultValue||e.defaultValue,"default")}else void 0!==e.defaultValue&&this.setOptionValueWithSource(r,e.defaultValue,"default");let i=(t,i,n)=>{null==t&&void 0!==e.presetArg&&(t=e.presetArg);let s=this.getOptionValue(r);null!==t&&e.parseArg?t=this._callParseArg(e,t,s,i):null!==t&&e.variadic&&(t=e._concatValue(t,s)),null==t&&(t=!e.negate&&(!!e.isBoolean()||!!e.optional||"")),this.setOptionValueWithSource(r,t,n)};return this.on("option:"+t,t=>{let r=`error: option '${e.flags}' argument '${t}' is invalid.`;i(t,r,"cli")}),e.envVar&&this.on("optionEnv:"+t,t=>{let r=`error: option '${e.flags}' value '${t}' from env '${e.envVar}' is invalid.`;i(t,r,"env")}),this}_optionEx(e,t,r,i,n){if("object"==typeof t&&t instanceof h)throw Error("To add an Option object use addOption() instead of option() or requiredOption()");let s=this.createOption(t,r);if(s.makeOptionMandatory(!!e.mandatory),"function"==typeof i)s.default(n).argParser(i);else if(i instanceof RegExp){let e=i;i=(t,r)=>{let i=e.exec(t);return i?i[0]:r},s.default(n).argParser(i)}else s.default(i);return this.addOption(s)}option(e,t,r,i){return this._optionEx({},e,t,r,i)}requiredOption(e,t,r,i){return this._optionEx({mandatory:!0},e,t,r,i)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){return this._passThroughOptions=!!e,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(e=!0){if(this.options.length)throw Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!e,this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,t){return this.setOptionValueWithSource(e,t,void 0)}setOptionValueWithSource(e,t,r){return this._storeOptionsAsProperties?this[e]=t:this._optionValues[e]=t,this._optionValueSources[e]=r,this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let t;return this._getCommandAndAncestors().forEach(r=>{void 0!==r.getOptionValueSource(e)&&(t=r.getOptionValueSource(e))}),t}_prepareUserArgs(e,t){let r;if(void 0!==e&&!Array.isArray(e))throw Error("first parameter to parse must be array or undefined");if(t=t||{},void 0===e&&void 0===t.from){o.versions?.electron&&(t.from="electron");let e=o.execArgv??[];(e.includes("-e")||e.includes("--eval")||e.includes("-p")||e.includes("--print"))&&(t.from="eval")}switch(void 0===e&&(e=o.argv),this.rawArgs=e.slice(),t.from){case void 0:case"node":this._scriptPath=e[1],r=e.slice(2);break;case"electron":o.defaultApp?(this._scriptPath=e[1],r=e.slice(2)):r=e.slice(1);break;case"user":r=e.slice(0);break;case"eval":r=e.slice(1);break;default:throw Error(`unexpected parse option { from: '${t.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",r}parse(e,t){let r=this._prepareUserArgs(e,t);return this._parseCommand([],r),this}async parseAsync(e,t){let r=this._prepareUserArgs(e,t);return await this._parseCommand([],r),this}_executeSubCommand(e,t){let r;t=t.slice();let i=!1,u=[".js",".ts",".tsx",".mjs",".cjs"];function l(e,t){let r=s.resolve(e,t);if(a.existsSync(r))return r;if(u.includes(s.extname(t)))return;let i=u.find(e=>a.existsSync(`${r}${e}`));if(i)return`${r}${i}`}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let c=e._executableFile||`${this._name}-${e._name}`,h=this._executableDir||"";if(this._scriptPath){let e;try{e=a.realpathSync(this._scriptPath)}catch(t){e=this._scriptPath}h=s.resolve(s.dirname(e),h)}if(h){let t=l(h,c);if(!t&&!e._executableFile&&this._scriptPath){let r=s.basename(this._scriptPath,s.extname(this._scriptPath));r!==this._name&&(t=l(h,`${r}-${e._name}`))}c=t||c}i=u.includes(s.extname(c)),"win32"!==o.platform?i?(t.unshift(c),t=f(o.execArgv).concat(t),r=n.spawn(o.argv[0],t,{stdio:"inherit"})):r=n.spawn(c,t,{stdio:"inherit"}):(t.unshift(c),t=f(o.execArgv).concat(t),r=n.spawn(o.execPath,t,{stdio:"inherit"})),r.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(e=>{o.on(e,()=>{!1===r.killed&&null===r.exitCode&&r.kill(e)})});let p=this._exitCallback;r.on("close",e=>{e=e??1,p?p(new d(e,"commander.executeSubCommandAsync","(close)")):o.exit(e)}),r.on("error",t=>{if("ENOENT"===t.code){let t=h?`searched for local subcommand relative to directory '${h}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory";throw Error(`'${c}' does not exist
 - if '${e._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${t}`)}if("EACCES"===t.code)throw Error(`'${c}' not executable`);if(p){let e=new d(1,"commander.executeSubCommandAsync","(error)");e.nestedError=t,p(e)}else o.exit(1)}),this.runningCommand=r}_dispatchSubcommand(e,t,r){let i,n=this._findCommand(e);return n||this.help({error:!0}),i=this._chainOrCallSubCommandHook(i,n,"preSubcommand"),i=this._chainOrCall(i,()=>{if(!n._executableHandler)return n._parseCommand(t,r);this._executeSubCommand(n,t.concat(r))})}_dispatchHelpCommand(e){e||this.help();let t=this._findCommand(e);return t&&!t._executableHandler&&t.help(),this._dispatchSubcommand(e,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){this.registeredArguments.forEach((e,t)=>{e.required&&null==this.args[t]&&this.missingArgument(e.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic||this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){let e=(e,t,r)=>{let i=t;if(null!==t&&e.parseArg){let n=`error: command-argument value '${t}' is invalid for argument '${e.name()}'.`;i=this._callParseArg(e,t,r,n)}return i};this._checkNumberOfArguments();let t=[];this.registeredArguments.forEach((r,i)=>{let n=r.defaultValue;r.variadic?i<this.args.length?(n=this.args.slice(i),r.parseArg&&(n=n.reduce((t,i)=>e(r,i,t),r.defaultValue))):void 0===n&&(n=[]):i<this.args.length&&(n=this.args[i],r.parseArg&&(n=e(r,n,r.defaultValue))),t[i]=n}),this.processedArgs=t}_chainOrCall(e,t){return e&&e.then&&"function"==typeof e.then?e.then(()=>t()):t()}_chainOrCallHooks(e,t){let r=e,i=[];return this._getCommandAndAncestors().reverse().filter(e=>void 0!==e._lifeCycleHooks[t]).forEach(e=>{e._lifeCycleHooks[t].forEach(t=>{i.push({hookedCommand:e,callback:t})})}),"postAction"===t&&i.reverse(),i.forEach(e=>{r=this._chainOrCall(r,()=>e.callback(e.hookedCommand,this))}),r}_chainOrCallSubCommandHook(e,t,r){let i=e;return void 0!==this._lifeCycleHooks[r]&&this._lifeCycleHooks[r].forEach(e=>{i=this._chainOrCall(i,()=>e(this,t))}),i}_parseCommand(e,t){let r=this.parseOptions(t);if(this._parseOptionsEnv(),this._parseOptionsImplied(),e=e.concat(r.operands),t=r.unknown,this.args=e.concat(t),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),t);if(this._getHelpCommand()&&e[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(e[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(t),this._dispatchSubcommand(this._defaultCommandName,e,t);!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),this._outputHelpIfRequested(r.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let i=()=>{r.unknown.length>0&&this.unknownOption(r.unknown[0])},n=`command:${this.name()}`;if(this._actionHandler){let r;return i(),this._processArguments(),r=this._chainOrCallHooks(r,"preAction"),r=this._chainOrCall(r,()=>this._actionHandler(this.processedArgs)),this.parent&&(r=this._chainOrCall(r,()=>{this.parent.emit(n,e,t)})),r=this._chainOrCallHooks(r,"postAction")}if(this.parent&&this.parent.listenerCount(n))i(),this._processArguments(),this.parent.emit(n,e,t);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,t);this.listenerCount("command:*")?this.emit("command:*",e,t):this.commands.length?this.unknownCommand():(i(),this._processArguments())}else this.commands.length?(i(),this.help({error:!0})):(i(),this._processArguments())}_findCommand(e){if(e)return this.commands.find(t=>t._name===e||t._aliases.includes(e))}_findOption(e){return this.options.find(t=>t.is(e))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach(e=>{e.options.forEach(t=>{t.mandatory&&void 0===e.getOptionValue(t.attributeName())&&e.missingMandatoryOptionValue(t)})})}_checkForConflictingLocalOptions(){let e=this.options.filter(e=>{let t=e.attributeName();return void 0!==this.getOptionValue(t)&&"default"!==this.getOptionValueSource(t)});e.filter(e=>e.conflictsWith.length>0).forEach(t=>{let r=e.find(e=>t.conflictsWith.includes(e.attributeName()));r&&this._conflictingOption(t,r)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach(e=>{e._checkForConflictingLocalOptions()})}parseOptions(e){let t=[],r=[],i=t,n=e.slice();function s(e){return e.length>1&&"-"===e[0]}let a=null;for(;n.length;){let e=n.shift();if("--"===e){i===r&&i.push(e),i.push(...n);break}if(a&&!s(e)){this.emit(`option:${a.name()}`,e);continue}if(a=null,s(e)){let t=this._findOption(e);if(t){if(t.required){let e=n.shift();void 0===e&&this.optionMissingArgument(t),this.emit(`option:${t.name()}`,e)}else if(t.optional){let e=null;n.length>0&&!s(n[0])&&(e=n.shift()),this.emit(`option:${t.name()}`,e)}else this.emit(`option:${t.name()}`);a=t.variadic?t:null;continue}}if(e.length>2&&"-"===e[0]&&"-"!==e[1]){let t=this._findOption(`-${e[1]}`);if(t){t.required||t.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${t.name()}`,e.slice(2)):(this.emit(`option:${t.name()}`),n.unshift(`-${e.slice(2)}`));continue}}if(/^--[^=]+=/.test(e)){let t=e.indexOf("="),r=this._findOption(e.slice(0,t));if(r&&(r.required||r.optional)){this.emit(`option:${r.name()}`,e.slice(t+1));continue}}if(s(e)&&(i=r),(this._enablePositionalOptions||this._passThroughOptions)&&0===t.length&&0===r.length){if(this._findCommand(e)){t.push(e),n.length>0&&r.push(...n);break}else if(this._getHelpCommand()&&e===this._getHelpCommand().name()){t.push(e),n.length>0&&t.push(...n);break}else if(this._defaultCommandName){r.push(e),n.length>0&&r.push(...n);break}}if(this._passThroughOptions){i.push(e),n.length>0&&i.push(...n);break}i.push(e)}return{operands:t,unknown:r}}opts(){if(this._storeOptionsAsProperties){let e={},t=this.options.length;for(let r=0;r<t;r++){let t=this.options[r].attributeName();e[t]=t===this._versionOptionName?this._version:this[t]}return e}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((e,t)=>Object.assign(e,t.opts()),{})}error(e,t){this._outputConfiguration.outputError(`${e}
`,this._outputConfiguration.writeErr),"string"==typeof this._showHelpAfterError?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0}));let r=t||{},i=r.exitCode||1,n=r.code||"commander.error";this._exit(i,n,e)}_parseOptionsEnv(){this.options.forEach(e=>{if(e.envVar&&e.envVar in o.env){let t=e.attributeName();(void 0===this.getOptionValue(t)||["default","config","env"].includes(this.getOptionValueSource(t)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,o.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}})}_parseOptionsImplied(){let e=new p(this.options),t=e=>void 0!==this.getOptionValue(e)&&!["default","implied"].includes(this.getOptionValueSource(e));this.options.filter(r=>void 0!==r.implied&&t(r.attributeName())&&e.valueFromOption(this.getOptionValue(r.attributeName()),r)).forEach(e=>{Object.keys(e.implied).filter(e=>!t(e)).forEach(t=>{this.setOptionValueWithSource(t,e.implied[t],"implied")})})}missingArgument(e){let t=`error: missing required argument '${e}'`;this.error(t,{code:"commander.missingArgument"})}optionMissingArgument(e){let t=`error: option '${e.flags}' argument missing`;this.error(t,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){let t=`error: required option '${e.flags}' not specified`;this.error(t,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,t){let r=e=>{let t=e.attributeName(),r=this.getOptionValue(t),i=this.options.find(e=>e.negate&&t===e.attributeName()),n=this.options.find(e=>!e.negate&&t===e.attributeName());return i&&(void 0===i.presetArg&&!1===r||void 0!==i.presetArg&&r===i.presetArg)?i:n||e},i=e=>{let t=r(e),i=t.attributeName();return"env"===this.getOptionValueSource(i)?`environment variable '${t.envVar}'`:`option '${t.flags}'`},n=`error: ${i(e)} cannot be used with ${i(t)}`;this.error(n,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let r=[],i=this;do{let e=i.createHelp().visibleOptions(i).filter(e=>e.long).map(e=>e.long);r=r.concat(e),i=i.parent}while(i&&!i._enablePositionalOptions);t=m(e,r)}let r=`error: unknown option '${e}'${t}`;this.error(r,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;let t=this.registeredArguments.length,r=this.parent?` for '${this.name()}'`:"",i=`error: too many arguments${r}. Expected ${t} argument${1===t?"":"s"} but got ${e.length}.`;this.error(i,{code:"commander.excessArguments"})}unknownCommand(){let e=this.args[0],t="";if(this._showSuggestionAfterError){let r=[];this.createHelp().visibleCommands(this).forEach(e=>{r.push(e.name()),e.alias()&&r.push(e.alias())}),t=m(e,r)}let r=`error: unknown command '${e}'${t}`;this.error(r,{code:"commander.unknownCommand"})}version(e,t,r){if(void 0===e)return this._version;this._version=e,t=t||"-V, --version",r=r||"output the version number";let i=this.createOption(t,r);return this._versionOptionName=i.attributeName(),this._registerOption(i),this.on("option:"+i.name(),()=>{this._outputConfiguration.writeOut(`${e}
`),this._exit(0,"commander.version",e)}),this}description(e,t){return void 0===e&&void 0===t?this._description:(this._description=e,t&&(this._argsDescription=t),this)}summary(e){return void 0===e?this._summary:(this._summary=e,this)}alias(e){if(void 0===e)return this._aliases[0];let t=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(t=this.commands[this.commands.length-1]),e===t._name)throw Error("Command alias can't be the same as its name");let r=this.parent?._findCommand(e);if(r){let t=[r.name()].concat(r.aliases()).join("|");throw Error(`cannot add alias '${e}' to command '${this.name()}' as already have command '${t}'`)}return t._aliases.push(e),this}aliases(e){return void 0===e?this._aliases:(e.forEach(e=>this.alias(e)),this)}usage(e){if(void 0===e){if(this._usage)return this._usage;let e=this.registeredArguments.map(e=>l(e));return[].concat(this.options.length||null!==this._helpOption?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?e:[]).join(" ")}return this._usage=e,this}name(e){return void 0===e?this._name:(this._name=e,this)}nameFromFilename(e){return this._name=s.basename(e,s.extname(e)),this}executableDir(e){return void 0===e?this._executableDir:(this._executableDir=e,this)}helpInformation(e){let t=this.createHelp();return void 0===t.helpWidth&&(t.helpWidth=e&&e.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),t.formatHelp(this,t)}_getHelpContext(e){let t,r={error:!!(e=e||{}).error};return t=r.error?e=>this._outputConfiguration.writeErr(e):e=>this._outputConfiguration.writeOut(e),r.write=e.write||t,r.command=this,r}outputHelp(e){let t;"function"==typeof e&&(t=e,e=void 0);let r=this._getHelpContext(e);this._getCommandAndAncestors().reverse().forEach(e=>e.emit("beforeAllHelp",r)),this.emit("beforeHelp",r);let i=this.helpInformation(r);if(t&&"string"!=typeof(i=t(i))&&!Buffer.isBuffer(i))throw Error("outputHelp callback must return a string or a Buffer");r.write(i),this._getHelpOption()?.long&&this.emit(this._getHelpOption().long),this.emit("afterHelp",r),this._getCommandAndAncestors().forEach(e=>e.emit("afterAllHelp",r))}helpOption(e,t){return"boolean"==typeof e?e?this._helpOption=this._helpOption??void 0:this._helpOption=null:(e=e??"-h, --help",t=t??"display help for command",this._helpOption=this.createOption(e,t)),this}_getHelpOption(){return void 0===this._helpOption&&this.helpOption(void 0,void 0),this._helpOption}addHelpOption(e){return this._helpOption=e,this}help(e){this.outputHelp(e);let t=o.exitCode||0;0===t&&e&&"function"!=typeof e&&e.error&&(t=1),this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){let r=["beforeAll","before","after","afterAll"];if(!r.includes(e))throw Error(`Unexpected value for position to addHelpText.
Expecting one of '${r.join("', '")}'`);let i=`${e}Help`;return this.on(i,e=>{let r;(r="function"==typeof t?t({error:e.error,command:e.command}):t)&&e.write(`${r}
`)}),this}_outputHelpIfRequested(e){let t=this._getHelpOption();t&&e.find(e=>t.is(e))&&(this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)"))}}function f(e){return e.map(e=>{let t,r;if(!e.startsWith("--inspect"))return e;let i="127.0.0.1",n="9229";return(null!==(r=e.match(/^(--inspect(-brk)?)$/))?t=r[1]:null!==(r=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(t=r[1],/^\d+$/.test(r[3])?n=r[3]:i=r[3]):null!==(r=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(t=r[1],i=r[3],n=r[4]),t&&"0"!==n)?`${t}=${i}:${parseInt(n)+1}`:e})}t.Command=D},761(e,t){class r extends Error{constructor(e,t,r){super(r),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=t,this.exitCode=e,this.nestedError=void 0}}t.CommanderError=r,t.InvalidArgumentError=class extends r{constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}}},704(e,t,r){let{humanReadableArgName:i}=r(268);t.Help=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(e){let t=e.commands.filter(e=>!e._hidden),r=e._getHelpCommand();return r&&!r._hidden&&t.push(r),this.sortSubcommands&&t.sort((e,t)=>e.name().localeCompare(t.name())),t}compareOptions(e,t){let r=e=>e.short?e.short.replace(/^-/,""):e.long.replace(/^--/,"");return r(e).localeCompare(r(t))}visibleOptions(e){let t=e.options.filter(e=>!e.hidden),r=e._getHelpOption();if(r&&!r.hidden){let i=r.short&&e._findOption(r.short),n=r.long&&e._findOption(r.long);i||n?r.long&&!n?t.push(e.createOption(r.long,r.description)):r.short&&!i&&t.push(e.createOption(r.short,r.description)):t.push(r)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];let t=[];for(let r=e.parent;r;r=r.parent){let e=r.options.filter(e=>!e.hidden);t.push(...e)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleArguments(e){return(e._argsDescription&&e.registeredArguments.forEach(t=>{t.description=t.description||e._argsDescription[t.name()]||""}),e.registeredArguments.find(e=>e.description))?e.registeredArguments:[]}subcommandTerm(e){let t=e.registeredArguments.map(e=>i(e)).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(t?" "+t:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce((e,r)=>Math.max(e,t.subcommandTerm(r).length),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce((e,r)=>Math.max(e,t.optionTerm(r).length),0)}longestGlobalOptionTermLength(e,t){return t.visibleGlobalOptions(e).reduce((e,r)=>Math.max(e,t.optionTerm(r).length),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce((e,r)=>Math.max(e,t.argumentTerm(r).length),0)}commandUsage(e){let t=e._name;e._aliases[0]&&(t=t+"|"+e._aliases[0]);let r="";for(let t=e.parent;t;t=t.parent)r=t.name()+" "+r;return r+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){let t=[];return(e.argChoices&&t.push(`choices: ${e.argChoices.map(e=>JSON.stringify(e)).join(", ")}`),void 0!==e.defaultValue&&(e.required||e.optional||e.isBoolean()&&"boolean"==typeof e.defaultValue)&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),void 0!==e.presetArg&&e.optional&&t.push(`preset: ${JSON.stringify(e.presetArg)}`),void 0!==e.envVar&&t.push(`env: ${e.envVar}`),t.length>0)?`${e.description} (${t.join(", ")})`:e.description}argumentDescription(e){let t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(e=>JSON.stringify(e)).join(", ")}`),void 0!==e.defaultValue&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),t.length>0){let r=`(${t.join(", ")})`;return e.description?`${e.description} ${r}`:r}return e.description}formatHelp(e,t){let r=t.padWidth(e,t),i=t.helpWidth||80;function n(e,n){if(n){let s=`${e.padEnd(r+2)}${n}`;return t.wrap(s,i-2,r+2)}return e}function s(e){return e.join("\n").replace(/^/gm," ".repeat(2))}let a=[`Usage: ${t.commandUsage(e)}`,""],o=t.commandDescription(e);o.length>0&&(a=a.concat([t.wrap(o,i,0),""]));let u=t.visibleArguments(e).map(e=>n(t.argumentTerm(e),t.argumentDescription(e)));u.length>0&&(a=a.concat(["Arguments:",s(u),""]));let l=t.visibleOptions(e).map(e=>n(t.optionTerm(e),t.optionDescription(e)));if(l.length>0&&(a=a.concat(["Options:",s(l),""])),this.showGlobalOptions){let r=t.visibleGlobalOptions(e).map(e=>n(t.optionTerm(e),t.optionDescription(e)));r.length>0&&(a=a.concat(["Global Options:",s(r),""]))}let d=t.visibleCommands(e).map(e=>n(t.subcommandTerm(e),t.subcommandDescription(e)));return d.length>0&&(a=a.concat(["Commands:",s(d),""])),a.join("\n")}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestGlobalOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}wrap(e,t,r,i=40){let n=RegExp("[\\n][ \\f\\t\\v\xa0  -   　\uFEFF]+");if(e.match(n))return e;let s=t-r;if(s<i)return e;let a=e.slice(0,r),o=e.slice(r).replace("\r\n","\n"),u=" ".repeat(r),l="\\s​",d=RegExp(`
|.{1,${s-1}}([${l}]|$)|[^${l}]+?([${l}]|$)`,"g");return a+(o.match(d)||[]).map((e,t)=>"\n"===e?"":(t>0?u:"")+e.trimEnd()).join("\n")}}},562(e,t,r){let{InvalidArgumentError:i}=r(761);t.Option=class{constructor(e,t){this.flags=e,this.description=t||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;const r=function(e){let t,r,i=e.split(/[ |,]+/);return i.length>1&&!/^[[<]/.test(i[1])&&(t=i.shift()),r=i.shift(),!t&&/^-[^-]$/.test(r)&&(t=r,r=void 0),{shortFlag:t,longFlag:r}}(e);this.short=r.shortFlag,this.long=r.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}preset(e){return this.presetArg=e,this}conflicts(e){return this.conflictsWith=this.conflictsWith.concat(e),this}implies(e){let t=e;return"string"==typeof e&&(t={[e]:!0}),this.implied=Object.assign(this.implied||{},t),this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_concatValue(e,t){return t!==this.defaultValue&&Array.isArray(t)?t.concat(e):[e]}choices(e){return this.argChoices=e.slice(),this.parseArg=(e,t)=>{if(!this.argChoices.includes(e))throw new i(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(e,t):e},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.name().replace(/^no-/,"").split("-").reduce((e,t)=>e+t[0].toUpperCase()+t.slice(1))}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}},t.DualOptions=class{constructor(e){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,e.forEach(e=>{e.negate?this.negativeOptions.set(e.attributeName(),e):this.positiveOptions.set(e.attributeName(),e)}),this.negativeOptions.forEach((e,t)=>{this.positiveOptions.has(t)&&this.dualOptions.add(t)})}valueFromOption(e,t){let r=t.attributeName();if(!this.dualOptions.has(r))return!0;let i=this.negativeOptions.get(r).presetArg;return t.negate===((void 0!==i&&i)===e)}}},12(e,t){t.suggestSimilar=function(e,t){if(!t||0===t.length)return"";t=Array.from(new Set(t));let r=e.startsWith("--");r&&(e=e.slice(2),t=t.map(e=>e.slice(2)));let i=[],n=3;return(t.forEach(t=>{if(t.length<=1)return;let r=function(e,t){if(Math.abs(e.length-t.length)>3)return Math.max(e.length,t.length);let r=[];for(let t=0;t<=e.length;t++)r[t]=[t];for(let e=0;e<=t.length;e++)r[0][e]=e;for(let i=1;i<=t.length;i++)for(let n=1;n<=e.length;n++){let s=1;s=+(e[n-1]!==t[i-1]),r[n][i]=Math.min(r[n-1][i]+1,r[n][i-1]+1,r[n-1][i-1]+s),n>1&&i>1&&e[n-1]===t[i-2]&&e[n-2]===t[i-1]&&(r[n][i]=Math.min(r[n][i],r[n-2][i-2]+1))}return r[e.length][t.length]}(e,t),s=Math.max(e.length,t.length);(s-r)/s>.4&&(r<n?(n=r,i=[t]):r===n&&i.push(t))}),i.sort((e,t)=>e.localeCompare(t)),r&&(i=i.map(e=>`--${e}`)),i.length>1)?`
(Did you mean one of ${i.join(", ")}?)`:1===i.length?`
(Did you mean ${i[0]}?)`:""}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";let e,t,n;r.r(i),r.d(i,{parseNdjsonWithMetadata:()=>u,prefixMap:()=>v,formatTaskId:()=>k,DependencyError:()=>f,parseNdjson:()=>o,parseTaskId:()=>E,ValidationError:()=>p,writeNdjson:()=>l,TaskManagerError:()=>h,priorities:()=>_,readNdjsonStream:()=>d,TaskRepository:()=>c,getNextTaskId:()=>w,symbols:()=>y,templates:()=>C,truncate:()=>x,applyTemplate:()=>b,colors:()=>g,ConflictError:()=>D,TaskService:()=>O,parseDate:()=>A,NotFoundError:()=>m,getPrefixForPlatform:()=>F,formatDate:()=>$});let s=require("fs"),a=require("path");function o(e){if(!s.existsSync(e))return[];let t=s.readFileSync(e,"utf-8").trim().split("\n"),r=[];for(let e of t)if(e.trim())try{r.push(JSON.parse(e))}catch{}return r}function u(e){if(!s.existsSync(e))return{records:[],metadata:null};let t=s.readFileSync(e,"utf-8").trim().split("\n"),r=[],i=null;for(let e of t)if(e.trim())try{let t=JSON.parse(e);t.metadata?i=t.metadata:r.push(t)}catch{}return{records:r,metadata:i}}function l(e,t,r){let i=a.dirname(e);s.existsSync(i)||s.mkdirSync(i,{recursive:!0});let n=[];for(let e of(r&&n.push(JSON.stringify({metadata:r})),t))n.push(JSON.stringify(e));s.writeFileSync(e,n.join("\n")+"\n")}async function*d(e){if(!s.existsSync(e))return;let t=s.readFileSync(e,"utf-8").split("\n");for(let e=0;e<t.length;e++){let r=t[e];if(r.trim())try{yield{line:r,index:e,data:JSON.parse(r)}}catch(t){yield{line:r,index:e,data:null,error:t}}}}class c{taskFile;constructor(e,t){this.taskFile=`.pland/${e}/${t}-tasks.jsonl`}load(){let{records:e,metadata:t}=u(this.taskFile);return{tasks:e,metadata:t}}save(e,t){l(this.taskFile,e,t??void 0)}exists(){return(0,s.existsSync)(this.taskFile)}getFilePath(){return this.taskFile}findById(e,t){return e.find(e=>e.id===t)}isDuplicate(e,t,r){return e.some(e=>e.id===t&&e.id!==r)}findDependents(e,t){return e.filter(e=>{var r;return null==(r=e.blockedBy)?void 0:r.includes(t)})}}class h extends Error{constructor(e){super(e),this.name=this.constructor.name}}class p extends h{field;details;code="VALIDATION_ERROR";constructor(e,t,r){super(e),this.field=t,this.details=r}}class m extends h{id;code="NOT_FOUND";constructor(e,t){super(`${e} not found: ${t}`),this.id=t}}class D extends h{conflictingId;code="CONFLICT";constructor(e,t){super(e),this.conflictingId=t}}class f extends h{chain;code="DEPENDENCY_ERROR";constructor(e,t){super(e),this.chain=t}}let g={reset:"\x1b[0m",bright:"\x1b[1m",dim:"\x1b[2m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"},y={check:"✓",cross:"✗",arrow:"→",dot:"•",star:"★",bullet:"◦"},_={critical:4,high:3,medium:2,low:1},v={frontend:"fe",backend:"be"},C={component:{level:"high",name:"Create {ComponentName} Component",component:"{ComponentName}",files:"src/components/{ComponentName}/{ComponentName}.{ext}",testsSuccess:["Renders correctly","Handles user interactions","Accessible with ARIA"],acceptanceCriteria:["Component renders without errors","All interactions work","WCAG 2.1 AA compliant"],estimatedEffort:"M",implementationNotes:"Use atomic design principles"},service:{level:"high",name:"Create {ServiceName} Service",component:"{ServiceName}",files:"src/services/{category}/{ServiceName}.{ext}",testsSuccess:["Unit tests pass","Error handling works","Edge cases covered"],acceptanceCriteria:["All methods return correct results","Error states handled properly"],estimatedEffort:"M",implementationNotes:"Register in DI container"},hook:{level:"medium",name:"Create use{HookName} Hook",component:"use{HookName}",files:"src/hooks/use{HookName}.{ext}",testsSuccess:["Hook returns expected values","State updates work","Cleanup runs correctly"],acceptanceCriteria:["Follows React hooks rules","Proper cleanup on unmount"],estimatedEffort:"S",implementationNotes:"Include TypeScript types"},page:{level:"high",name:"Create {PageName} Page",component:"{PageName}",files:"src/pages/{PageName}/{PageName}.{ext}",testsSuccess:["Page renders","Navigation works","Data fetching works"],acceptanceCriteria:["Full user flow functional","Loading and error states handled"],estimatedEffort:"L",implementationNotes:"Integrate with routing"},test:{level:"medium",name:"Add Tests for {ComponentName}",component:"{ComponentName}",files:"{ComponentPath}.test.{ext}",testsSuccess:["All tests pass","Coverage meets threshold"],acceptanceCriteria:["Unit tests cover happy path","Edge cases tested","Error scenarios covered"],estimatedEffort:"M",implementationNotes:"Use testing-library framework"},repository:{level:"high",name:"Create {Entity}Repository",component:"{Entity}Repository",files:"src/repositories/{entity}Repository.{ext}",testsSuccess:["CRUD operations","Error handling","Edge cases"],acceptanceCriteria:["All CRUD methods work","Database queries tested"],estimatedEffort:"M",implementationNotes:"Use ORM of choice"},controller:{level:"high",name:"Create {Entity}Controller",component:"{Entity}Controller",files:"src/controllers/{entity}Controller.{ext}",testsSuccess:["Request parsing","Response formatting","Error responses"],acceptanceCriteria:["All endpoints work","Validation implemented"],estimatedEffort:"M",implementationNotes:"Framework-specific patterns"},migration:{level:"critical",name:"Create {Entity} Migration",component:"{Entity}Migration",files:"migrations/{timestamp}_create_{entity}.{ext}",testsSuccess:["Migration up/down","Schema validation"],acceptanceCriteria:["Table created correctly","Indexes defined","Migration reversible"],estimatedEffort:"S",implementationNotes:"Include rollback"},middleware:{level:"medium",name:"Create {MiddlewareName} Middleware",component:"{MiddlewareName}Middleware",files:"src/middleware/{middlewareName}.{ext}",testsSuccess:["Middleware execution","Error cases","Bypass conditions"],acceptanceCriteria:["Middleware works correctly","Errors handled"],estimatedEffort:"S",implementationNotes:"Document execution order"},"di-registration":{level:"medium",name:"Register {ServiceName} in DI Container",component:"DI Registration",files:"src/di/registrations.{ext}",testsSuccess:["Service resolves correctly","Singleton/scoped works"],acceptanceCriteria:["Registered as correct lifetime","Dependencies injected properly"],estimatedEffort:"S",implementationNotes:"Use asClass().singleton() or .scoped()"}};function b(e,t){let r={...e};for(let[e,i]of Object.entries(r))if("string"==typeof i){let n=i;for(let[e,r]of Object.entries(t))n=n.replace(RegExp(`\\{${e}\\}`,"g"),String(r));r[e]=n}else Array.isArray(i)&&(r[e]=i.map(e=>{if("string"==typeof e){let r=e;for(let[e,i]of Object.entries(t))r=r.replace(RegExp(`\\{${e}\\}`,"g"),String(i));return r}return e}));return r}function F(e){return({frontend:"fe",backend:"be"})[e]}function E(e){let t=e.match(/^(fe|be)-(\d+)$/);if(!t)return null;let[,r,i]=t,n={fe:"frontend",be:"backend"}[r];return n?{platform:n,number:Number.parseInt(i,10)}:null}function k(e,t){let r=F(e);return`${r}-${String(t).padStart(4,"0")}`}function w(e,t){let r=F(e),i=t.filter(e=>e.startsWith(r)).map(e=>{let t=E(e);return(null==t?void 0:t.number)??0}).filter(e=>!Number.isNaN(e));return k(e,(i.length>0?Math.max(...i):0)+1)}function x(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}function $(e){return e.toISOString()}function A(e){return new Date(e)}class O{repository;tasks=[];metadata=null;constructor(e,t){this.repository=new c(e,t),this.load()}load(){let{tasks:e,metadata:t}=this.repository.load();this.tasks=e,this.metadata=t,this.rebuildDependencies()}save(){this.repository.save(this.tasks,this.metadata??void 0)}getFilePath(){return this.repository.getFilePath()}init(e={}){this.repository.exists()&&this.tasks.length>0?console.log("Task file already exists"):(this.metadata={planName:this.getPlanName(),platform:this.getPlatform(),framework:e.framework??"unknown",currentDependencies:e.deps??[],createdAt:new Date().toISOString(),version:"1.0.0"},this.save(),console.log(`Initialized: ${this.repository.getFilePath()}`),console.log(`  Plan: ${this.metadata.planName} | Platform: ${this.metadata.platform}`))}getPlanName(){let e=this.repository.getFilePath().match(/\.pland\/([^/]+)\//);return(null==e?void 0:e[1])??"unknown"}getPlatform(){let e=this.repository.getFilePath().match(/(frontend|backend)-tasks\.jsonl$/);return(null==e?void 0:e[1])??"frontend"}create(e){if(this.repository.isDuplicate(this.tasks,e.id))throw new D(`Task ID already exists: ${e.id}`,e.id);let t={id:e.id,name:e.name,level:e.level,component:e.component,files:e.files??"",testsSuccess:e.testsSuccess??[],blockedBy:e.blockedBy??[],blockedByTransitive:[],dependencyChain:[],blocks:[],acceptanceCriteria:e.acceptanceCriteria??[],estimatedEffort:e.estimatedEffort??"M",implementationNotes:e.implementationNotes??"",done:e.done??!1,ready:e.ready??!0,createdAt:e.createdAt??new Date().toISOString(),updatedAt:e.updatedAt??new Date().toISOString()};return this.tasks.push(t),this.rebuildDependencies(),this.save(),t}update(e,t){let r=this.repository.findById(this.tasks,e);if(!r)throw new m("Task",e);return Object.assign(r,t),r.updatedAt=new Date().toISOString(),this.rebuildDependencies(),this.save(),r}remove(e){let t=this.tasks.findIndex(t=>t.id===e);if(-1===t)throw new m("Task",e);let r=this.repository.findDependents(this.tasks,e);if(r.length>0)for(let t of(console.warn(`Warning: ${r.length} task(s) depend on ${e}:`),r))console.warn(`  - ${t.id}: ${t.name}`);this.tasks.splice(t,1),this.rebuildDependencies(),this.save()}get(e){return this.repository.findById(this.tasks,e)}list(e={}){let t=[...this.tasks];e.level&&(t=t.filter(t=>t.level===e.level)),void 0!==e.done&&(t=t.filter(t=>t.done===e.done)),void 0!==e.ready&&(t=t.filter(t=>t.ready===e.ready)),e.foundation&&(t=t.filter(e=>!e.blockedBy||0===e.blockedBy.length));let r={critical:4,high:3,medium:2,low:1};return t.sort((e,t)=>{let i=r[t.level]-r[e.level];return 0!==i?i:e.id.localeCompare(t.id)}),t}getChain(e){let t=this.get(e);if(!t)throw new m("Task",e);let r=new Map(this.tasks.map(e=>[e.id,e])),i={task:{id:t.id},dependencies:[],dependents:[],fullChain:[]};if(t.blockedBy)for(let e of t.blockedBy){let t=r.get(e);t&&i.dependencies.push({task:{id:t.id,name:t.name},direct:!0})}if(t.blockedByTransitive)for(let e of t.blockedByTransitive){let t=r.get(e);t&&!i.dependencies.find(t=>t.task.id===e)&&i.dependencies.push({task:{id:t.id,name:t.name},direct:!1})}if(t.blocks)for(let e of t.blocks){let t=r.get(e);t&&i.dependents.push({id:t.id,name:t.name})}return i.fullChain=t.dependencyChain??[],i}validate(){let e=[],t=new Map(this.tasks.map(e=>[e.id,e])),r=new Set,i=new Set,n=(s,a=[])=>{if(i.has(s))return void e.push({type:"circular",severity:"error",message:`Circular dependency: [...${a.slice(-3)}, ${s}].join(' → ')`});if(r.has(s))return;r.add(s),i.add(s);let o=t.get(s);if(o&&o.blockedBy)for(let e of o.blockedBy)n(e,[...a,s]);i.delete(s)};for(let e of this.tasks)n(e.id);for(let r of this.tasks)if(r.blockedBy)for(let i of r.blockedBy)t.has(i)||e.push({type:"invalid-reference",severity:"warning",message:`Task ${r.id} references non-existent ${i}`});return e}getProgress(){let e={total:this.tasks.length,byLevel:{critical:0,high:0,medium:0,low:0},byStatus:{done:0,pending:0,ready:0,blocked:0},foundation:0,blocked:0,completionRate:"0"};for(let t of this.tasks)e.byLevel[t.level]=(e.byLevel[t.level]??0)+1,t.done?e.byStatus.done++:t.ready?e.byStatus.ready++:e.byStatus.pending++,t.blockedBy&&0!==t.blockedBy.length?e.blocked++:e.foundation++;return e.byStatus.blocked=e.blocked,e.completionRate=e.total>0?(e.byStatus.done/e.total*100).toFixed(1):"0",e}getNextId(){var e;return w((null==(e=this.metadata)?void 0:e.platform)??"frontend",this.tasks.map(e=>e.id))}rebuildDependencies(){let e=new Map(this.tasks.map(e=>[e.id,e]));for(let e of this.tasks)e.blockedByTransitive=[],e.dependencyChain=[],e.blocks=[];for(let t of this.tasks)if(t.blockedBy)for(let r of t.blockedBy){let i=e.get(r);i&&(i.blocks||(i.blocks=[]),i.blocks.push(t.id))}for(let t of this.tasks){let r=new Set,i=new Set,n=t=>{if(r.has(t))return;r.add(t);let s=e.get(t);if(s&&s.blockedBy)for(let e of s.blockedBy)i.add(e),n(e)};if(t.blockedBy&&t.blockedBy.length>0){for(let e of t.blockedBy)n(e);t.blockedByTransitive=Array.from(i)}}}}let{program:S,createCommand:B,createArgument:T,createOption:N,CommanderError:j,InvalidArgumentError:R,InvalidOptionArgumentError:P,Command:I,Argument:M,Option:Z,Help:V}=r(523);var L,H,W,z,U,q,G,K=r(439),J=r.n(K);(U=L||(L={})).assertEqual=e=>{},U.assertIs=function(e){},U.assertNever=function(e){throw Error()},U.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},U.getValidEnumValues=e=>{let t=U.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(let i of t)r[i]=e[i];return U.objectValues(r)},U.objectValues=e=>U.objectKeys(e).map(function(t){return e[t]}),U.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},U.find=(e,t)=>{for(let r of e)if(t(r))return r},U.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,U.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},U.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(H||(H={})).mergeShapes=(e,t)=>({...e,...t});let Y=L.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),X=e=>{switch(typeof e){case"undefined":return Y.undefined;case"string":return Y.string;case"number":return Number.isNaN(e)?Y.nan:Y.number;case"boolean":return Y.boolean;case"function":return Y.function;case"bigint":return Y.bigint;case"symbol":return Y.symbol;case"object":if(Array.isArray(e))return Y.array;if(null===e)return Y.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return Y.promise;if("u">typeof Map&&e instanceof Map)return Y.map;if("u">typeof Set&&e instanceof Set)return Y.set;if("u">typeof Date&&e instanceof Date)return Y.date;return Y.object;default:return Y.unknown}},Q=L.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ee extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},i=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(i);else if("invalid_return_type"===n.code)i(n.returnTypeError);else if("invalid_arguments"===n.code)i(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,i=0;for(;i<n.path.length;){let r=n.path[i];i===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(this),r}static assert(e){if(!(e instanceof ee))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,L.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let i of this.issues)if(i.path.length>0){let r=i.path[0];t[r]=t[r]||[],t[r].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}ee.create=e=>new ee(e);let et=(e,t)=>{let r;switch(e.code){case Q.invalid_type:r=e.received===Y.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Q.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,L.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:r=`Unrecognized key(s) in object: ${L.joinValues(e.keys,", ")}`;break;case Q.invalid_union:r="Invalid input";break;case Q.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${L.joinValues(e.options)}`;break;case Q.invalid_enum_value:r=`Invalid enum value. Expected ${L.joinValues(e.options)}, received '${e.received}'`;break;case Q.invalid_arguments:r="Invalid function arguments";break;case Q.invalid_return_type:r="Invalid function return type";break;case Q.invalid_date:r="Invalid date";break;case Q.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:L.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Q.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Q.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Q.custom:r="Invalid input";break;case Q.invalid_intersection_types:r="Intersection results could not be merged";break;case Q.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Q.not_finite:r="Number must be finite";break;default:r=t.defaultError,L.assertNever(e)}return{message:r}};(q=W||(W={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},q.toString=e=>"string"==typeof e?e:e?.message;let er=e=>{let{data:t,path:r,errorMaps:i,issueData:n}=e,s=[...r,...n.path||[]],a={...n,path:s};if(void 0!==n.message)return{...n,path:s,message:n.message};let o="";for(let e of i.filter(e=>!!e).slice().reverse())o=e(a,{data:t,defaultError:o}).message;return{...n,path:s,message:o}};function ei(e,t){let r=er({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,et,void 0].filter(e=>!!e)});e.common.issues.push(r)}class en{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let i of t){if("aborted"===i.status)return es;"dirty"===i.status&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,i=await e.value;r.push({key:t,value:i})}return en.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let i of t){let{key:t,value:n}=i;if("aborted"===t.status||"aborted"===n.status)return es;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||i.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}}let es=Object.freeze({status:"aborted"}),ea=e=>({status:"dirty",value:e}),eo=e=>({status:"valid",value:e}),eu=e=>"u">typeof Promise&&e instanceof Promise;class el{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let ed=(e,t)=>{if("valid"===t.status)return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new ee(e.common.issues);return this._error=t,this._error}}};function ec(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:i,description:n}=e;if(t&&(r||i))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??n.defaultError}:void 0===n.data?{message:s??i??n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:s??r??n.defaultError}},description:n}}class eh{get description(){return this._def.description}_getType(e){return X(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:X(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new en,ctx:{common:e.parent.common,data:e.data,parsedType:X(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(eu(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:X(e)},i=this._parseSync({data:e,path:r.path,parent:r});return ed(r,i)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:X(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return"valid"===r.status?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>"valid"===e.status?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:X(e)},i=this._parse({data:e,path:r.path,parent:r});return ed(r,await (eu(i)?i:Promise.resolve(i)))}refine(e,t){return this._refinement((r,i)=>{let n=e(r),s=()=>i.addIssue({code:Q.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"u">typeof Promise&&n instanceof Promise?n.then(e=>!!e||(s(),!1)):!!n||(s(),!1)})}refinement(e,t){return this._refinement((r,i)=>!!e(r)||(i.addIssue("function"==typeof t?t(r,i):t),!1))}_refinement(e){return new e6({schema:this,typeName:z.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return e9.create(this,this._def)}nullable(){return e4.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eL.create(this)}promise(){return e8.create(this,this._def)}or(e){return eW.create([this,e],this._def)}and(e){return eq.create(this,e,this._def)}transform(e){return new e6({...ec(this._def),schema:this,typeName:z.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new e7({...ec(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:z.ZodDefault})}brand(){return new tt({typeName:z.ZodBranded,type:this,...ec(this._def)})}catch(e){return new e5({...ec(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:z.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return tr.create(this,e)}readonly(){return ti.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let ep=/^c[^\s-]{8,}$/i,em=/^[0-9a-z]+$/,eD=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ef=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,eg=/^[a-z0-9_-]{21}$/i,ey=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,e_=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ev=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,eC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eb=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,eF=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,eE=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ek=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ew=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ex="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",e$=RegExp(`^${ex}$`);function eA(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}class eO extends eh{_parse(t){var r,i,n,s;let a;if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Y.string){let e=this._getOrReturnCtx(t);return ei(e,{code:Q.invalid_type,expected:Y.string,received:e.parsedType}),es}let o=new en;for(let u of this._def.checks)if("min"===u.kind)t.data.length<u.value&&(ei(a=this._getOrReturnCtx(t,a),{code:Q.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),o.dirty());else if("max"===u.kind)t.data.length>u.value&&(ei(a=this._getOrReturnCtx(t,a),{code:Q.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),o.dirty());else if("length"===u.kind){let e=t.data.length>u.value,r=t.data.length<u.value;(e||r)&&(a=this._getOrReturnCtx(t,a),e?ei(a,{code:Q.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):r&&ei(a,{code:Q.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),o.dirty())}else if("email"===u.kind)ev.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"email",code:Q.invalid_string,message:u.message}),o.dirty());else if("emoji"===u.kind)e||(e=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),e.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"emoji",code:Q.invalid_string,message:u.message}),o.dirty());else if("uuid"===u.kind)ef.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"uuid",code:Q.invalid_string,message:u.message}),o.dirty());else if("nanoid"===u.kind)eg.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"nanoid",code:Q.invalid_string,message:u.message}),o.dirty());else if("cuid"===u.kind)ep.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"cuid",code:Q.invalid_string,message:u.message}),o.dirty());else if("cuid2"===u.kind)em.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"cuid2",code:Q.invalid_string,message:u.message}),o.dirty());else if("ulid"===u.kind)eD.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"ulid",code:Q.invalid_string,message:u.message}),o.dirty());else if("url"===u.kind)try{new URL(t.data)}catch{ei(a=this._getOrReturnCtx(t,a),{validation:"url",code:Q.invalid_string,message:u.message}),o.dirty()}else"regex"===u.kind?(u.regex.lastIndex=0,u.regex.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"regex",code:Q.invalid_string,message:u.message}),o.dirty())):"trim"===u.kind?t.data=t.data.trim():"includes"===u.kind?t.data.includes(u.value,u.position)||(ei(a=this._getOrReturnCtx(t,a),{code:Q.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),o.dirty()):"toLowerCase"===u.kind?t.data=t.data.toLowerCase():"toUpperCase"===u.kind?t.data=t.data.toUpperCase():"startsWith"===u.kind?t.data.startsWith(u.value)||(ei(a=this._getOrReturnCtx(t,a),{code:Q.invalid_string,validation:{startsWith:u.value},message:u.message}),o.dirty()):"endsWith"===u.kind?t.data.endsWith(u.value)||(ei(a=this._getOrReturnCtx(t,a),{code:Q.invalid_string,validation:{endsWith:u.value},message:u.message}),o.dirty()):"datetime"===u.kind?(function(e){let t=`${ex}T${eA(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)})(u).test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{code:Q.invalid_string,validation:"datetime",message:u.message}),o.dirty()):"date"===u.kind?e$.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{code:Q.invalid_string,validation:"date",message:u.message}),o.dirty()):"time"===u.kind?RegExp(`^${eA(u)}$`).test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{code:Q.invalid_string,validation:"time",message:u.message}),o.dirty()):"duration"===u.kind?e_.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"duration",code:Q.invalid_string,message:u.message}),o.dirty()):"ip"===u.kind?(r=t.data,!(("v4"===(i=u.version)||!i)&&eC.test(r)||("v6"===i||!i)&&eF.test(r))&&1&&(ei(a=this._getOrReturnCtx(t,a),{validation:"ip",code:Q.invalid_string,message:u.message}),o.dirty())):"jwt"===u.kind?!function(e,t){if(!ey.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let i=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(i));if("object"!=typeof n||null===n||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)return!1;return!0}catch{return!1}}(t.data,u.alg)&&(ei(a=this._getOrReturnCtx(t,a),{validation:"jwt",code:Q.invalid_string,message:u.message}),o.dirty()):"cidr"===u.kind?(n=t.data,!(("v4"===(s=u.version)||!s)&&eb.test(n)||("v6"===s||!s)&&eE.test(n))&&1&&(ei(a=this._getOrReturnCtx(t,a),{validation:"cidr",code:Q.invalid_string,message:u.message}),o.dirty())):"base64"===u.kind?ek.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"base64",code:Q.invalid_string,message:u.message}),o.dirty()):"base64url"===u.kind?ew.test(t.data)||(ei(a=this._getOrReturnCtx(t,a),{validation:"base64url",code:Q.invalid_string,message:u.message}),o.dirty()):L.assertNever(u);return{status:o.value,value:t.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:Q.invalid_string,...W.errToObj(r)})}_addCheck(e){return new eO({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...W.errToObj(e)})}url(e){return this._addCheck({kind:"url",...W.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...W.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...W.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...W.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...W.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...W.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...W.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...W.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...W.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...W.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...W.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...W.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...W.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...W.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...W.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...W.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...W.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...W.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...W.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...W.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...W.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...W.errToObj(t)})}nonempty(e){return this.min(1,W.errToObj(e))}trim(){return new eO({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new eO({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new eO({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}eO.create=e=>new eO({checks:[],typeName:z.ZodString,coerce:e?.coerce??!1,...ec(e)});class eS extends eh{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Y.number){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.number,received:t.parsedType}),es}let r=new en;for(let i of this._def.checks)"int"===i.kind?L.isInteger(e.data)||(ei(t=this._getOrReturnCtx(e,t),{code:Q.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"multipleOf"===i.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,n=r>i?r:i;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}(e.data,i.value)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(ei(t=this._getOrReturnCtx(e,t),{code:Q.not_finite,message:i.message}),r.dirty()):L.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,W.toString(t))}gt(e,t){return this.setLimit("min",e,!1,W.toString(t))}lte(e,t){return this.setLimit("max",e,!0,W.toString(t))}lt(e,t){return this.setLimit("max",e,!1,W.toString(t))}setLimit(e,t,r,i){return new eS({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:W.toString(i)}]})}_addCheck(e){return new eS({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:W.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:W.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:W.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:W.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:W.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:W.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:W.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:W.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:W.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&L.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}eS.create=e=>new eS({checks:[],typeName:z.ZodNumber,coerce:e?.coerce||!1,...ec(e)});class eB extends eh{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Y.bigint)return this._getInvalidInput(e);let r=new en;for(let i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):L.assertNever(i);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.bigint,received:t.parsedType}),es}gte(e,t){return this.setLimit("min",e,!0,W.toString(t))}gt(e,t){return this.setLimit("min",e,!1,W.toString(t))}lte(e,t){return this.setLimit("max",e,!0,W.toString(t))}lt(e,t){return this.setLimit("max",e,!1,W.toString(t))}setLimit(e,t,r,i){return new eB({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:W.toString(i)}]})}_addCheck(e){return new eB({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:W.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:W.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:W.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:W.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:W.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}eB.create=e=>new eB({checks:[],typeName:z.ZodBigInt,coerce:e?.coerce??!1,...ec(e)});class eT extends eh{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Y.boolean){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.boolean,received:t.parsedType}),es}return eo(e.data)}}eT.create=e=>new eT({typeName:z.ZodBoolean,coerce:e?.coerce||!1,...ec(e)});class eN extends eh{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Y.date){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.date,received:t.parsedType}),es}if(Number.isNaN(e.data.getTime()))return ei(this._getOrReturnCtx(e),{code:Q.invalid_date}),es;let r=new en;for(let i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):L.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eN({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:W.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:W.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}eN.create=e=>new eN({checks:[],coerce:e?.coerce||!1,typeName:z.ZodDate,...ec(e)});class ej extends eh{_parse(e){if(this._getType(e)!==Y.symbol){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.symbol,received:t.parsedType}),es}return eo(e.data)}}ej.create=e=>new ej({typeName:z.ZodSymbol,...ec(e)});class eR extends eh{_parse(e){if(this._getType(e)!==Y.undefined){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.undefined,received:t.parsedType}),es}return eo(e.data)}}eR.create=e=>new eR({typeName:z.ZodUndefined,...ec(e)});class eP extends eh{_parse(e){if(this._getType(e)!==Y.null){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.null,received:t.parsedType}),es}return eo(e.data)}}eP.create=e=>new eP({typeName:z.ZodNull,...ec(e)});class eI extends eh{constructor(){super(...arguments),this._any=!0}_parse(e){return eo(e.data)}}eI.create=e=>new eI({typeName:z.ZodAny,...ec(e)});class eM extends eh{constructor(){super(...arguments),this._unknown=!0}_parse(e){return eo(e.data)}}eM.create=e=>new eM({typeName:z.ZodUnknown,...ec(e)});class eZ extends eh{_parse(e){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.never,received:t.parsedType}),es}}eZ.create=e=>new eZ({typeName:z.ZodNever,...ec(e)});class eV extends eh{_parse(e){if(this._getType(e)!==Y.undefined){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.void,received:t.parsedType}),es}return eo(e.data)}}eV.create=e=>new eV({typeName:z.ZodVoid,...ec(e)});class eL extends eh{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==Y.array)return ei(t,{code:Q.invalid_type,expected:Y.array,received:t.parsedType}),es;if(null!==i.exactLength){let e=t.data.length>i.exactLength.value,n=t.data.length<i.exactLength.value;(e||n)&&(ei(t,{code:e?Q.too_big:Q.too_small,minimum:n?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(ei(t,{code:Q.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(ei(t,{code:Q.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>i.type._parseAsync(new el(t,e,t.path,r)))).then(e=>en.mergeArray(r,e));let n=[...t.data].map((e,r)=>i.type._parseSync(new el(t,e,t.path,r)));return en.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new eL({...this._def,minLength:{value:e,message:W.toString(t)}})}max(e,t){return new eL({...this._def,maxLength:{value:e,message:W.toString(t)}})}length(e,t){return new eL({...this._def,exactLength:{value:e,message:W.toString(t)}})}nonempty(e){return this.min(1,e)}}eL.create=(e,t)=>new eL({type:e,minLength:null,maxLength:null,exactLength:null,typeName:z.ZodArray,...ec(t)});class eH extends eh{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=L.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Y.object){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.object,received:t.parsedType}),es}let{status:t,ctx:r}=this._processInputParams(e),{shape:i,keys:n}=this._getCached(),s=[];if(!(this._def.catchall instanceof eZ&&"strip"===this._def.unknownKeys))for(let e in r.data)n.includes(e)||s.push(e);let a=[];for(let e of n){let t=i[e],n=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new el(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof eZ){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(ei(r,{code:Q.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let i=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new el(r,i,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let r=await t.key,i=await t.value;e.push({key:r,value:i,alwaysSet:t.alwaysSet})}return e}).then(e=>en.mergeObjectSync(t,e)):en.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return W.errToObj,new eH({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let i=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:W.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new eH({...this._def,unknownKeys:"strip"})}passthrough(){return new eH({...this._def,unknownKeys:"passthrough"})}extend(e){return new eH({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new eH({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:z.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new eH({...this._def,catchall:e})}pick(e){let t={};for(let r of L.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new eH({...this._def,shape:()=>t})}omit(e){let t={};for(let r of L.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new eH({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof eH){let r={};for(let i in t.shape){let n=t.shape[i];r[i]=e9.create(e(n))}return new eH({...t._def,shape:()=>r})}if(t instanceof eL)return new eL({...t._def,type:e(t.element)});if(t instanceof e9)return e9.create(e(t.unwrap()));if(t instanceof e4)return e4.create(e(t.unwrap()));if(t instanceof eG)return eG.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of L.objectKeys(this.shape)){let i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}return new eH({...this._def,shape:()=>t})}required(e){let t={};for(let r of L.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof e9;)e=e._def.innerType;t[r]=e}return new eH({...this._def,shape:()=>t})}keyof(){return e1(L.objectKeys(this.shape))}}eH.create=(e,t)=>new eH({shape:()=>e,unknownKeys:"strip",catchall:eZ.create(),typeName:z.ZodObject,...ec(t)}),eH.strictCreate=(e,t)=>new eH({shape:()=>e,unknownKeys:"strict",catchall:eZ.create(),typeName:z.ZodObject,...ec(t)}),eH.lazycreate=(e,t)=>new eH({shape:e,unknownKeys:"strip",catchall:eZ.create(),typeName:z.ZodObject,...ec(t)});class eW extends eh{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new ee(e.ctx.common.issues));return ei(t,{code:Q.invalid_union,unionErrors:r}),es});{let e,i=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&i.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=i.map(e=>new ee(e));return ei(t,{code:Q.invalid_union,unionErrors:n}),es}}get options(){return this._def.options}}eW.create=(e,t)=>new eW({options:e,typeName:z.ZodUnion,...ec(t)});let ez=e=>{if(e instanceof eQ)return ez(e.schema);if(e instanceof e6)return ez(e.innerType());if(e instanceof e0)return[e.value];if(e instanceof e2)return e.options;if(e instanceof e3)return L.objectValues(e.enum);else if(e instanceof e7)return ez(e._def.innerType);else if(e instanceof eR)return[void 0];else if(e instanceof eP)return[null];else if(e instanceof e9)return[void 0,...ez(e.unwrap())];else if(e instanceof e4)return[null,...ez(e.unwrap())];else if(e instanceof tt)return ez(e.unwrap());else if(e instanceof ti)return ez(e.unwrap());else if(e instanceof e5)return ez(e._def.innerType);else return[]};class eU extends eh{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==Y.object)return ei(t,{code:Q.invalid_type,expected:Y.object,received:t.parsedType}),es;let r=this.discriminator,i=t.data[r],n=this.optionsMap.get(i);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(ei(t,{code:Q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),es)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let i=new Map;for(let r of t){let t=ez(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(i.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);i.set(n,r)}}return new eU({typeName:z.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...ec(r)})}}class eq extends eh{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if("aborted"===e.status||"aborted"===i.status)return es;let n=function e(t,r){let i=X(t),n=X(r);if(t===r)return{valid:!0,data:t};if(i===Y.object&&n===Y.object){let i=L.objectKeys(r),n=L.objectKeys(t).filter(e=>-1!==i.indexOf(e)),s={...t,...r};for(let i of n){let n=e(t[i],r[i]);if(!n.valid)return{valid:!1};s[i]=n.data}return{valid:!0,data:s}}if(i===Y.array&&n===Y.array){if(t.length!==r.length)return{valid:!1};let i=[];for(let n=0;n<t.length;n++){let s=e(t[n],r[n]);if(!s.valid)return{valid:!1};i.push(s.data)}return{valid:!0,data:i}}if(i===Y.date&&n===Y.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,i.value);return n.valid?(("dirty"===e.status||"dirty"===i.status)&&t.dirty(),{status:t.value,value:n.data}):(ei(r,{code:Q.invalid_intersection_types}),es)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>i(e,t)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}eq.create=(e,t,r)=>new eq({left:e,right:t,typeName:z.ZodIntersection,...ec(r)});class eG extends eh{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Y.array)return ei(r,{code:Q.invalid_type,expected:Y.array,received:r.parsedType}),es;if(r.data.length<this._def.items.length)return ei(r,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),es;!this._def.rest&&r.data.length>this._def.items.length&&(ei(r,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...r.data].map((e,t)=>{let i=this._def.items[t]||this._def.rest;return i?i._parse(new el(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(i).then(e=>en.mergeArray(t,e)):en.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new eG({...this._def,rest:e})}}eG.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new eG({items:e,typeName:z.ZodTuple,rest:null,...ec(t)})};class eK extends eh{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Y.object)return ei(r,{code:Q.invalid_type,expected:Y.object,received:r.parsedType}),es;let i=[],n=this._def.keyType,s=this._def.valueType;for(let e in r.data)i.push({key:n._parse(new el(r,e,r.path,e)),value:s._parse(new el(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?en.mergeObjectAsync(t,i):en.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return new eK(t instanceof eh?{keyType:e,valueType:t,typeName:z.ZodRecord,...ec(r)}:{keyType:eO.create(),valueType:e,typeName:z.ZodRecord,...ec(t)})}}class eJ extends eh{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Y.map)return ei(r,{code:Q.invalid_type,expected:Y.map,received:r.parsedType}),es;let i=this._def.keyType,n=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:i._parse(new el(r,e,r.path,[s,"key"])),value:n._parse(new el(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let i=await r.key,n=await r.value;if("aborted"===i.status||"aborted"===n.status)return es;("dirty"===i.status||"dirty"===n.status)&&t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let i=r.key,n=r.value;if("aborted"===i.status||"aborted"===n.status)return es;("dirty"===i.status||"dirty"===n.status)&&t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}}}}eJ.create=(e,t,r)=>new eJ({valueType:t,keyType:e,typeName:z.ZodMap,...ec(r)});class eY extends eh{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Y.set)return ei(r,{code:Q.invalid_type,expected:Y.set,received:r.parsedType}),es;let i=this._def;null!==i.minSize&&r.data.size<i.minSize.value&&(ei(r,{code:Q.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&r.data.size>i.maxSize.value&&(ei(r,{code:Q.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let n=this._def.valueType;function s(e){let r=new Set;for(let i of e){if("aborted"===i.status)return es;"dirty"===i.status&&t.dirty(),r.add(i.value)}return{status:t.value,value:r}}let a=[...r.data.values()].map((e,t)=>n._parse(new el(r,e,r.path,t)));return r.common.async?Promise.all(a).then(e=>s(e)):s(a)}min(e,t){return new eY({...this._def,minSize:{value:e,message:W.toString(t)}})}max(e,t){return new eY({...this._def,maxSize:{value:e,message:W.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eY.create=(e,t)=>new eY({valueType:e,minSize:null,maxSize:null,typeName:z.ZodSet,...ec(t)});class eX extends eh{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==Y.function)return ei(t,{code:Q.invalid_type,expected:Y.function,received:t.parsedType}),es;function r(e,r){return er({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,et,et].filter(e=>!!e),issueData:{code:Q.invalid_arguments,argumentsError:r}})}function i(e,r){return er({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,et,et].filter(e=>!!e),issueData:{code:Q.invalid_return_type,returnTypeError:r}})}let n={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof e8){let e=this;return eo(async function(...t){let a=new ee([]),o=await e._def.args.parseAsync(t,n).catch(e=>{throw a.addIssue(r(t,e)),a}),u=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(u,n).catch(e=>{throw a.addIssue(i(u,e)),a})})}{let e=this;return eo(function(...t){let a=e._def.args.safeParse(t,n);if(!a.success)throw new ee([r(t,a.error)]);let o=Reflect.apply(s,this,a.data),u=e._def.returns.safeParse(o,n);if(!u.success)throw new ee([i(o,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eX({...this._def,args:eG.create(e).rest(eM.create())})}returns(e){return new eX({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eX({args:e||eG.create([]).rest(eM.create()),returns:t||eM.create(),typeName:z.ZodFunction,...ec(r)})}}class eQ extends eh{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eQ.create=(e,t)=>new eQ({getter:e,typeName:z.ZodLazy,...ec(t)});class e0 extends eh{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return ei(t,{received:t.data,code:Q.invalid_literal,expected:this._def.value}),es}return{status:"valid",value:e.data}}get value(){return this._def.value}}function e1(e,t){return new e2({values:e,typeName:z.ZodEnum,...ec(t)})}e0.create=(e,t)=>new e0({value:e,typeName:z.ZodLiteral,...ec(t)});class e2 extends eh{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return ei(t,{expected:L.joinValues(r),received:t.parsedType,code:Q.invalid_type}),es}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return ei(t,{received:t.data,code:Q.invalid_enum_value,options:r}),es}return eo(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return e2.create(e,{...this._def,...t})}exclude(e,t=this._def){return e2.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}e2.create=e1;class e3 extends eh{_parse(e){let t=L.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Y.string&&r.parsedType!==Y.number){let e=L.objectValues(t);return ei(r,{expected:L.joinValues(e),received:r.parsedType,code:Q.invalid_type}),es}if(this._cache||(this._cache=new Set(L.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=L.objectValues(t);return ei(r,{received:r.data,code:Q.invalid_enum_value,options:e}),es}return eo(e.data)}get enum(){return this._def.values}}e3.create=(e,t)=>new e3({values:e,typeName:z.ZodNativeEnum,...ec(t)});class e8 extends eh{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==Y.promise&&!1===t.common.async?(ei(t,{code:Q.invalid_type,expected:Y.promise,received:t.parsedType}),es):eo((t.parsedType===Y.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}e8.create=(e,t)=>new e8({type:e,typeName:z.ZodPromise,...ec(t)});class e6 extends eh{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===z.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,n={addIssue:e=>{ei(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===i.type){let e=i.transform(r.data,n);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return es;let i=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===i.status?es:"dirty"===i.status||"dirty"===t.value?ea(i.value):i});{if("aborted"===t.value)return es;let i=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===i.status?es:"dirty"===i.status||"dirty"===t.value?ea(i.value):i}}if("refinement"===i.type){let e=e=>{let t=i.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?es:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===i.status?es:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}}if("transform"===i.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>"valid"!==e.status?es:Promise.resolve(i.transform(e.value,n)).then(e=>({status:t.value,value:e})));else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if("valid"!==e.status)return es;let s=i.transform(e.value,n);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}L.assertNever(i)}}e6.create=(e,t,r)=>new e6({schema:e,typeName:z.ZodEffects,effect:t,...ec(r)}),e6.createWithPreprocess=(e,t,r)=>new e6({schema:t,effect:{type:"preprocess",transform:e},typeName:z.ZodEffects,...ec(r)});class e9 extends eh{_parse(e){return this._getType(e)===Y.undefined?eo(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}e9.create=(e,t)=>new e9({innerType:e,typeName:z.ZodOptional,...ec(t)});class e4 extends eh{_parse(e){return this._getType(e)===Y.null?eo(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}e4.create=(e,t)=>new e4({innerType:e,typeName:z.ZodNullable,...ec(t)});class e7 extends eh{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===Y.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}e7.create=(e,t)=>new e7({innerType:e,typeName:z.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...ec(t)});class e5 extends eh{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return eu(i)?i.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ee(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new ee(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}e5.create=(e,t)=>new e5({innerType:e,typeName:z.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...ec(t)});class te extends eh{_parse(e){if(this._getType(e)!==Y.nan){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:Y.nan,received:t.parsedType}),es}return{status:"valid",value:e.data}}}te.create=e=>new te({typeName:z.ZodNaN,...ec(e)}),Symbol("zod_brand");class tt extends eh{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class tr extends eh{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?es:"dirty"===e.status?(t.dirty(),ea(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?es:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new tr({in:e,out:t,typeName:z.ZodPipeline})}}class ti extends eh{_parse(e){let t=this._def.innerType._parse(e),r=e=>("valid"===e.status&&(e.value=Object.freeze(e.value)),e);return eu(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}ti.create=(e,t)=>new ti({innerType:e,typeName:z.ZodReadonly,...ec(t)}),eH.lazycreate,(G=z||(z={})).ZodString="ZodString",G.ZodNumber="ZodNumber",G.ZodNaN="ZodNaN",G.ZodBigInt="ZodBigInt",G.ZodBoolean="ZodBoolean",G.ZodDate="ZodDate",G.ZodSymbol="ZodSymbol",G.ZodUndefined="ZodUndefined",G.ZodNull="ZodNull",G.ZodAny="ZodAny",G.ZodUnknown="ZodUnknown",G.ZodNever="ZodNever",G.ZodVoid="ZodVoid",G.ZodArray="ZodArray",G.ZodObject="ZodObject",G.ZodUnion="ZodUnion",G.ZodDiscriminatedUnion="ZodDiscriminatedUnion",G.ZodIntersection="ZodIntersection",G.ZodTuple="ZodTuple",G.ZodRecord="ZodRecord",G.ZodMap="ZodMap",G.ZodSet="ZodSet",G.ZodFunction="ZodFunction",G.ZodLazy="ZodLazy",G.ZodLiteral="ZodLiteral",G.ZodEnum="ZodEnum",G.ZodEffects="ZodEffects",G.ZodNativeEnum="ZodNativeEnum",G.ZodOptional="ZodOptional",G.ZodNullable="ZodNullable",G.ZodDefault="ZodDefault",G.ZodCatch="ZodCatch",G.ZodPromise="ZodPromise",G.ZodBranded="ZodBranded",G.ZodPipeline="ZodPipeline",G.ZodReadonly="ZodReadonly";let tn=eO.create,ts=eS.create;te.create,eB.create;let ta=eT.create;eN.create,ej.create,eR.create,eP.create,eI.create;let to=eM.create;eZ.create,eV.create;let tu=eL.create,tl=eH.create;eH.strictCreate;let td=eW.create;eU.create,eq.create,eG.create;let tc=eK.create;eJ.create,eY.create,eX.create,eQ.create,e0.create;let th=e2.create;e3.create,e8.create,e6.create,e9.create,e4.create,e6.createWithPreprocess,tr.create;let tp=th(["frontend","backend"]),tm=th(["react","vue","svelte","angular","next","nuxt","solid","preact","flutter","react-native","android","ios","swiftui","jetpack-compose","electron","tauri","express","fastify","nest","koa","hapi","unknown"]);tl({platform:tp,framework:tm.optional(),confidence:th(["high","medium","low"]),evidence:tu(tn())}),tl({platform:tp,framework:tm,language:tn().min(1),fileExtensions:tu(tn()),buildFiles:tu(tn()),configFiles:tu(tn())});let tD=tl({name:tn().min(1),description:tn(),example:tn(),file:tn(),line:ts().int().positive().optional()});tl({platform:tp,framework:tm.optional(),files:tu(tn()),patterns:tu(tn()),dependencies:tu(tn()).optional()}),tl({platform:tp,framework:tm,patterns:tu(tD),bestPractices:tu(tn()),antiPatterns:tu(tn())}),tl({platform:tp,framework:tm,directories:tc(tu(tn())),fileNaming:tn(),importStyle:th(["relative","absolute","alias"])}),tl({platform:tp,framework:tm,testFramework:tn().min(1),testLocation:tn().min(1),mockPattern:tn().min(1)});let tf=th(["critical","high","medium","low"]),tg=th(["S","M","L","XL"]),ty=tl({planName:tn().min(1),platform:tp,framework:tn().min(1),currentDependencies:tu(tn()),createdAt:tn().datetime(),version:tn().min(1)}),t_=tl({id:tn().min(1),name:tn().min(1),level:tf,component:tn().min(1),files:tn(),testsSuccess:tu(tn()),blockedBy:tu(tn()),blockedByTransitive:tu(tn()),dependencyChain:tu(tn()),blocks:tu(tn()),acceptanceCriteria:tu(tn()),estimatedEffort:tg,implementationNotes:tn(),done:ta(),ready:ta(),createdAt:tn().datetime(),updatedAt:tn().datetime()}),tv=tl({id:tn().min(1),name:tn().min(1),level:tf,component:tn().min(1),files:tn().optional(),testsSuccess:tu(tn()).optional(),blockedBy:tu(tn()).optional(),acceptanceCriteria:tu(tn()).optional(),estimatedEffort:tg.optional(),implementationNotes:tn().optional(),done:ta().optional(),ready:ta().optional(),createdAt:tn().datetime().optional(),updatedAt:tn().datetime().optional()}),tC=tl({name:tn().min(1).optional(),level:tf.optional(),component:tn().min(1).optional(),files:tn().optional(),testsSuccess:tu(tn()).optional(),blockedBy:tu(tn()).optional(),acceptanceCriteria:tu(tn()).optional(),estimatedEffort:tg.optional(),implementationNotes:tn().optional(),done:ta().optional(),ready:ta().optional()});tl({task:t_,dependencies:tu(tl({task:t_,direct:ta()})),dependents:tu(t_),fullChain:tu(tn())}),tl({total:ts().int().nonnegative(),byLevel:tc(tf,ts().int().nonnegative()),byStatus:tl({done:ts().int().nonnegative(),pending:ts().int().nonnegative(),ready:ts().int().nonnegative(),blocked:ts().int().nonnegative()}),foundation:ts().int().nonnegative(),blocked:ts().int().nonnegative(),completionRate:tn().regex(/^\d+(\.\d+)?%$/)}),tl({type:tn().min(1),severity:th(["error","warning"]),message:tn().min(1)});let tb=tl({framework:tn().min(1),language:tn().min(1),stateManagement:tn().optional(),testing:tu(tn()).optional(),buildTools:tu(tn()).optional(),additional:tu(tn()).optional()}),tF=tl({name:tn().min(1),description:tn(),techStack:tb,platform:tp,constraints:tu(tn())}),tE=tl({id:tn().min(1),name:tn().min(1),description:tn(),priority:th(["critical","high","medium","low"]),status:th(["pending","in-progress","completed"]),components:tu(tn()),acceptanceCriteria:tu(tn())}),tk=tl({name:tn().min(1),path:tn().min(1),type:th(["page","layout","component","hook","util"]),props:tc(to()).optional(),dependencies:tu(tn())}),tw=tl({approach:th(["redux","zustand","context","mobx","pinia","bloc","provider"]),stores:tu(tn())}),tx=tl({path:tn().min(1),method:th(["GET","POST","PUT","DELETE","PATCH"]),description:tn(),auth:ta(),requestType:tn().optional(),responseType:tn().optional()}),t$=tl({path:tn().min(1),component:tn().min(1),layout:tn().optional(),protected:ta()}),tA=tl({type:th(["file-based","config-based"]),routes:tu(t$)}),tO=tl({approach:th(["css","scss","tailwind","styled-components","emotion"]),themePath:tn().optional()}),tS=tl({components:tu(tk),state:tw,apis:tu(tx),routing:tA,styling:tO}),tB=tl({name:tn().min(1),description:tn(),responsibilities:tu(tn()),dependencies:tu(tn())}),tT=tl({type:tn().min(1),schema:tu(tn()),orm:tn().min(1)}),tN=tl({name:tn().min(1),description:tn(),methods:tu(tn())}),tj=tl({modules:tu(tB),endpoints:tu(tx),database:tT,services:tu(tN)}),tR=tl({id:tn().min(1),description:tn(),given:tn(),when:tn(),then:tu(tn()),priority:th(["critical","high","medium","low"])}),tP=tl({unit:tu(tR),integration:tu(tR),e2e:tu(tR)});tl({context:tF,features:tu(tE),architecture:td([tS,tj]),testing:tP,tasks:tu(t_),metadata:ty});let tI=tl({type:tn().min(1),severity:th(["error","warning"]),message:tn().min(1),field:tn().optional(),details:to().optional()}),tM=tl({totalIssues:ts().int().nonnegative(),critical:ts().int().nonnegative(),byCategory:tc(ts().int().nonnegative()),passed:ta()});tl({planName:tn().min(1),timestamp:tn().datetime(),errors:tu(tI),warnings:tu(tI),summary:tM});let tZ=null;function tV(){if(!tZ)throw new p("plan-name and platform must be specified");return new O(tZ.planName,tZ.platform)}let tL=new I;tL.name("task-manager").description("Architect-Planner Task Manager CLI").version("0.0.6").option("-p, --plan-name <name>","Plan name").option("-pl, --platform <platform>","Platform (frontend|backend)","frontend").hook("preAction",e=>{let t=e.opts().planName||tL.opts().planName,r=e.opts().platform||tL.opts().platform;"frontend"!==r&&"backend"!==r&&(console.error(`${g.red}Error: platform must be 'frontend' or 'backend'${g.reset}
`),process.exit(1));let i=e.parent!==tL;i&&!t&&(console.error(`${g.red}Error: plan-name is required${g.reset}`),console.error(`
Usage: task-manager --plan-name <name> [--platform=frontend|backend] <command> [options]`),console.error(`
Run '${g.cyan}task-manager --help${g.reset}' for more information.
`),process.exit(1)),i&&(tZ={planName:t,platform:r})}),(t=tL.command("task").description("Task commands")).command("create").description("Create a new task").option("--template <name>","Use a template").option("--id <id>","Task ID").option("--name <name>","Task name").option("--level <level>","Priority level").option("--component <component>","Component name").option("--files <files>","Files to create").option("--done","Mark as done").option("--notReady","Mark as not ready").option("--blockedBy <ids...>","Blocking task IDs").action(e=>{let t,r=tV();if(e.template){let r=C[e.template];r||(console.error(`${g.red}Template not found: ${e.template}${g.reset}`),console.log(`Available: ${Object.keys(C).join(", ")}`),process.exit(1));let{template:i,...n}=e;t=b(r,n)}else t=e;t.id||(t.id=r.getNextId());let i=function(e){let t=tv.safeParse(e);if(!t.success){let e=t.error.errors[0];throw new p(`Invalid task data: ${null==e?void 0:e.message}`,null==e?void 0:e.path.join("."),t.error.flatten())}return t.data}(t),n=r.create(i);console.log(`${g.green}${y.check} Task created: ${n.id}${g.reset}`)}),t.command("update <id>").description("Update an existing task").option("--name <name>","Task name").option("--level <level>","Priority level").option("--done","Mark as done").option("--notDone","Mark as not done").option("--ready","Mark as ready").option("--notReady","Mark as not ready").action((e,t)=>{let r=tV(),i={};t.done&&(i.done=!0),t.notDone&&(i.done=!1),t.ready&&(i.ready=!0),t.notReady&&(i.ready=!1),t.name&&(i.name=t.name),t.level&&(i.level=t.level);let n=function(e){let t=tC.safeParse(e);if(!t.success){let e=t.error.errors[0];throw new p(`Invalid update data: ${null==e?void 0:e.message}`,null==e?void 0:e.path.join("."),t.error.flatten())}return t.data}(i);r.update(e,n),console.log(`${g.green}${y.check} Task updated: ${e}${g.reset}`)}),t.command("list").description("List tasks").option("--level <level>","Filter by level").option("--done","Show only done").option("--pending","Show only pending").option("--ready","Show only ready").option("--notReady","Show only not ready").option("--foundation","Show only foundation tasks").action(e=>{let t=tV(),r={};e.level&&(r.level=e.level),e.done&&(r.done=!0),e.pending&&(r.done=!1),e.ready&&(r.ready=!0),e.notReady&&(r.ready=!1),e.foundation&&(r.foundation=!0),function(e,t){if(console.log(""),console.log(`${g.bright}Tasks: ${t.planName??"Unknown"}${g.reset}`),console.log(`${g.dim}Platform: ${t.platform??"unknown"}${g.reset}
`),0===e.length)return console.log(`${g.dim}No tasks found.${g.reset}`);let r=new(J())({head:[`${g.bright}ID${g.reset}`,`${g.bright}Name${g.reset}`,`${g.bright}Priority${g.reset}`,`${g.bright}Status${g.reset}`,`${g.bright}Blocked By${g.reset}`],style:{head:[],border:["cyan"]},wordWrap:!0}),i={critical:{color:"red",icon:"\uD83D\uDD34"},high:{color:"yellow",icon:"⚠️"},medium:{color:"blue",icon:"○"},low:{color:"dim",icon:"•"}};for(let t of e){let{color:e,icon:n}=i[t.level]||{color:"dim",icon:"○"},s=t.done?`${g.green}${y.check} Done${g.reset}`:t.ready?`${g.cyan}○ Ready${g.reset}`:`${g.red}${y.cross} Pending${g.reset}`,a=t.blockedBy&&t.blockedBy.length>0?t.blockedBy.join(", "):"-";r.push([`${g.cyan}${t.id}${g.reset}`,t.name,`${g[e]}${n} ${t.level}${g.reset}`,s,a])}console.log(r.toString()),console.log(`
${g.dim}Total: ${e.length} task(s)${g.reset}`)}(t.list(r),t.metadata??{})}),t.command("detail <id>").description("Show task detail").action(e=>{let t=tV().get(e);t||(console.error(`${g.red}Error: Task not found: ${e}${g.reset}`),process.exit(1)),function(e){console.log(`
${g.bright}${g.cyan}${e.id}${g.reset}: ${e.name}
`);let t=new(J())({style:{head:[],border:["cyan"],compact:!0},wordWrap:!0}),r=e.done?`${g.green}${y.check} Done`:e.ready?`${g.blue}${y.bullet} Ready`:`${g.red}${y.cross} Not Ready`;if(t.push([`${g.bright}Component${g.reset}`,e.component],[`${g.bright}Level${g.reset}`,`${g.yellow}${e.level}${g.reset}`],[`${g.bright}Effort${g.reset}`,e.estimatedEffort],[`${g.bright}Status${g.reset}`,`${r}${g.reset}`]),e.files&&t.push([`${g.bright}Files${g.reset}`,e.files]),e.blockedBy&&e.blockedBy.length>0&&t.push([`${g.bright}Blocked by${g.reset}`,e.blockedBy.join(", ")]),e.blocks&&e.blocks.length>0&&t.push([`${g.bright}Blocks${g.reset}`,e.blocks.join(", ")]),e.implementationNotes&&t.push([`${g.bright}Notes${g.reset}`,e.implementationNotes]),console.log(t.toString()),e.testsSuccess&&e.testsSuccess.length>0)for(let t of(console.log(`
${g.bright}Tests:${g.reset}`),e.testsSuccess))console.log(`  ${g.green}${y.check}${g.reset} ${t}`);if(e.acceptanceCriteria&&e.acceptanceCriteria.length>0)for(let t of(console.log(`
${g.bright}Acceptance Criteria:${g.reset}`),e.acceptanceCriteria))console.log(`  ${g.cyan}${y.bullet}${g.reset} ${t}`);console.log("")}(t)}),t.command("chain <id>").description("Show dependency chain").action(e=>{!function(e){if(console.log(`
${g.bright}Dependency Chain: ${e.task.id}${g.reset}
`),e.dependencies.length>0){let t=new(J())({head:[`${g.bright}Type${g.reset}`,`${g.bright}ID${g.reset}`,`${g.bright}Name${g.reset}`],style:{head:[],border:["cyan"]},wordWrap:!0});for(let r of(console.log(`${g.bright}Dependencies:${g.reset}`),e.dependencies)){let e=r.direct?`${g.green}${y.arrow} Direct${g.reset}`:`${g.dim}${y.bullet} Transitive${g.reset}`;t.push([e,`${g.cyan}${r.task.id}${g.reset}`,r.task.name])}console.log(t.toString()),console.log("")}else console.log(`${g.green}${y.check} No dependencies${g.reset}
`);if(e.dependents.length>0){let t=new(J())({head:[`${g.bright}ID${g.reset}`,`${g.bright}Name${g.reset}`],style:{head:[],border:["cyan"]},wordWrap:!0});for(let r of(console.log(`${g.bright}Dependents:${g.reset}`),e.dependents))t.push([`${g.cyan}${r.id}${g.reset}`,r.name]);console.log(t.toString()),console.log("")}}(tV().getChain(e))}),t.command("remove <id>").description("Remove a task").action(e=>{tV().remove(e),console.log(`${g.green}${y.check} Task removed: ${e}${g.reset}`)}),t.command("status").description("Show task status dashboard").action(()=>{!function(e){let t=e.getProgress();console.log(""),console.log(`${g.bright}Task Progress Dashboard${g.reset}
`);let r=Math.floor(Number.parseFloat(t.completionRate)/100*50),i=`${g.green}${"█".repeat(r)}${g.dim}${"░".repeat(50-r)}${g.reset}`,n=new(J())({style:{head:[],border:["cyan"],compact:!0}});n.push([`${g.bright}Progress${g.reset}`,`${i} ${t.completionRate}%`]),console.log(n.toString());let s=new(J())({head:[`${g.bright}Total${g.reset}`,`${g.green}Done${g.reset}`,`${g.yellow}Ready${g.reset}`,`${g.red}Pending${g.reset}`],style:{head:[],border:["cyan"]}});s.push([`${g.cyan}${t.total}${g.reset}`,`${g.green}${t.byStatus.done}${g.reset}`,`${g.yellow}${t.byStatus.ready}${g.reset}`,`${g.red}${t.byStatus.pending}${g.reset}`]),console.log(`
${g.bright}By Status:${g.reset}`),console.log(s.toString());let a=new(J())({head:[`${g.red}Critical${g.reset}`,`${g.yellow}High${g.reset}`,`${g.blue}Medium${g.reset}`,`${g.dim}Low${g.reset}`],style:{head:[],border:["cyan"]}});a.push([`${g.red}${t.byLevel.critical}${g.reset}`,`${g.yellow}${t.byLevel.high}${g.reset}`,`${g.blue}${t.byLevel.medium}${g.reset}`,`${g.dim}${t.byLevel.low}${g.reset}`]),console.log(`
${g.bright}By Priority:${g.reset}`),console.log(a.toString());let o=new(J())({head:[`${g.bright}Type${g.reset}`,`${g.bright}Count${g.reset}`],style:{head:["cyan"],border:["cyan"]}});o.push([`${g.green}${y.check} Foundation${g.reset}`,`${g.green}${t.foundation}${g.reset}`],[`${g.red}${y.arrow} Blocked${g.reset}`,`${g.red}${t.blocked}${g.reset}`]),console.log(`
${g.bright}Dependencies:${g.reset}`),console.log(o.toString());let u=e.list({done:!1,ready:!0,foundation:!0});if(u.length>0){console.log(`
${g.green}${y.star} Ready to start:${g.reset}`);let e=new(J())({head:[`${g.bright}ID${g.reset}`,`${g.bright}Priority${g.reset}`,`${g.bright}Name${g.reset}`],style:{head:[],border:["cyan"]},wordWrap:!0});for(let t of u.slice(0,5))e.push([`${g.cyan}${t.id}${g.reset}`,`${g.dim}[${t.level}]${g.reset}`,t.name]);console.log(e.toString()),u.length>5&&console.log(`${g.dim}... and ${u.length-5} more${g.reset}`)}console.log("")}(tV())}),t.command("validate").description("Validate tasks").action(()=>{let e=tV().validate();if(0===e.length)console.log(`${g.green}${y.check} No issues found!${g.reset}`);else for(let t of e){let e="error"===t.severity?`${g.red}${y.cross}`:`${g.yellow}${y.bullet}`;console.log(`${e} ${t.severity}: ${t.message}`)}process.exit(+(e.filter(e=>"error"===e.severity).length>0))}),t.command("validate-jsonl").description("Validate JSONL task file structure").action(()=>{let e,t=tV().getFilePath();(0,s.existsSync)(t)||(console.log(`${g.yellow}${y.bullet} Task file not found: ${t}${g.reset}`),process.exit(1));try{e=(0,s.readFileSync)(t,"utf-8")}catch(e){console.log(`${g.red}${y.cross} Failed to read file: ${e instanceof Error?e.message:"Unknown error"}${g.reset}`),process.exit(1)}let r=function(e){let t=[],r=e.trim().split("\n"),i=new Set,n=new Map;for(let e=0;e<r.length;e++){let s,a=r[e];if(!a.trim())continue;try{s=JSON.parse(a)}catch(r){t.push({type:"format",severity:"error",line:e+1,message:`Invalid JSON: ${r instanceof Error?r.message:"Parse error"}`});continue}let o=t_.safeParse(s);if(!o.success){let r=o.error.errors[0];t.push({type:"structure",severity:"error",line:e+1,taskId:s.id,message:`${(null==r?void 0:r.path.join("."))||"root"}: ${null==r?void 0:r.message}`});continue}let u=o.data;i.add(u.id),n.set(u.id,u)}for(let[e,r]of n.entries())for(let n of r.blockedBy)i.has(n)||t.push({type:"dependency",severity:"error",taskId:e,message:`blockedBy references non-existent task: ${n}`}),n===e&&t.push({type:"dependency",severity:"error",taskId:e,message:"Task cannot block itself"});for(let e of function(e){let t=[],r=new Set,i=new Set,n=(s,a)=>{if(i.has(s)){let e=[...a,s].join(" → ");t.push({taskId:a[0]??s,message:`Circular dependency: ${e}`});return}if(r.has(s))return;r.add(s),i.add(s);let o=e.find(e=>e.id===s);if(o)for(let e of o.blockedBy)n(e,[...a,s]);i.delete(s)};for(let t of e)r.has(t.id)||n(t.id,[]);return t}(Array.from(n.values())))t.push({type:"dependency",severity:"error",taskId:e.taskId,message:e.message});for(let[e,r]of n.entries())new Date(r.createdAt)>new Date(r.updatedAt)&&t.push({type:"data",severity:"warning",taskId:e,message:`createdAt (${r.createdAt}) is after updatedAt (${r.updatedAt})`});return t}(e);if(0===r.length){let r=e.trim().split("\n").length;console.log(`${g.green}${y.check} Validation passed!${g.reset}`),console.log(`${g.dim}File: ${t}${g.reset}`),console.log(`${g.dim}Total entries: ${r}${g.reset}`)}else{console.log(`${g.red}${y.cross} Validation failed!${g.reset}`),console.log(`${g.dim}File: ${t}${g.reset}
`);let e=r.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{});for(let e of r){let t="error"===e.severity?`${g.red}${y.cross}`:`${g.yellow}${y.bullet}`,r=e.taskId?` [${g.cyan}${e.taskId}${g.reset}]`:e.line?` [${g.cyan}Line ${e.line}${g.reset}]`:"";console.log(`${t} ${e.type}${r}: ${e.message}`)}console.log(`
${g.dim}Summary:${g.reset}`),console.log(`  Errors: ${e.format??0+(e.structure??0)+(e.dependency??0)+(e.data??0)}`),console.log(`  Warnings: ${e.data??0}`)}process.exit(+(r.filter(e=>"error"===e.severity).length>0))}),t.command("template").description("List available templates").action(()=>{for(let[e,t]of(console.log(`${g.bright}Available Templates:${g.reset}
`),Object.entries(C)))console.log(`${g.cyan}${e}${g.reset}`),console.log(`  ${g.dim}Level: ${t.level} | Effort: ${t.estimatedEffort}${g.reset}`),console.log(`  ${g.dim}${t.name.substring(0,60)}...${g.reset}
`)}),(n=tL.command("project").description("Project commands")).command("init").description("Initialize project").option("--framework <name>","Framework name").option("--deps <deps...>","Dependencies").action(e=>{tV().init({framework:e.framework,deps:e.deps})}),n.command("validate").description("Validate project").action(()=>{let e=tV().validate();if(0===e.length)console.log(`${g.green}${y.check} No issues found!${g.reset}`);else for(let t of e){let e="error"===t.severity?`${g.red}${y.cross}`:`${g.yellow}${y.bullet}`;console.log(`${e} ${t.severity}: ${t.message}`)}process.exit(+(e.filter(e=>"error"===e.severity).length>0))}),process.argv.length<=2||process.argv.includes("--help")||process.argv.includes("-h")?tL.parse(process.argv):(tL.exitOverride(e=>{throw("commander.help"===e.code||"commander.version"===e.code)&&process.exit(0),e}),tL.parseAsync().catch(e=>{e instanceof Error&&"code"in e&&(console.error(`${g.red}${e.code}: ${e.message}${g.reset}`),process.exit(1)),e instanceof Error&&!e.message.includes("commander")&&console.error(`${g.red}Error: ${e.message}${g.reset}`),process.exit(1)}))})(),module.exports=i})();
//# sourceMappingURL=index.cjs.map